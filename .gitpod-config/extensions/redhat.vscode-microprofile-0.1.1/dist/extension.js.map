{"version":3,"sources":["../webpack/bootstrap","../external \"vscode\"","../external \"path\"",".././node_modules/vscode-languageserver-protocol/lib/main.js",".././node_modules/vscode-jsonrpc/lib/main.js",".././node_modules/vscode-languageclient/lib/utils/is.js","../external \"fs\"",".././node_modules/vscode-languageclient/lib/client.js",".././node_modules/vscode-languageclient/lib/utils/uuid.js","../external \"child_process\"",".././node_modules/vscode-jsonrpc/lib/is.js","../external \"util\"",".././node_modules/vscode-jsonrpc/lib/events.js",".././src/definitions/constants.ts",".././node_modules/vscode-jsonrpc/lib/messageReader.js",".././node_modules/vscode-jsonrpc/lib/messageWriter.js",".././node_modules/minimatch/minimatch.js",".././node_modules/path-is-absolute/index.js",".././node_modules/semver/semver.js","../external \"os\"","../external \"net\"",".././node_modules/vscode-languageclient/lib/protocolCompletionItem.js",".././node_modules/vscode-languageclient/lib/protocolCodeLens.js",".././node_modules/vscode-languageclient/lib/protocolDocumentLink.js",".././node_modules/glob/glob.js",".././node_modules/fs.realpath/index.js","../external \"assert\"",".././node_modules/glob/common.js",".././node_modules/wrappy/wrappy.js",".././node_modules/once/once.js",".././src/extension.ts",".././src/languageServer/requirements.ts",".././node_modules/expand-home-dir/index.js",".././node_modules/find-java-home/dist/index.js",".././node_modules/find-java-home/node_modules/which/which.js",".././node_modules/winreg/lib/registry.js",".././node_modules/vscode-languageclient/lib/main.js",".././node_modules/vscode-jsonrpc/lib/messages.js",".././node_modules/vscode-jsonrpc/lib/cancellation.js",".././node_modules/vscode-jsonrpc/lib/linkedMap.js",".././node_modules/vscode-jsonrpc/lib/pipeSupport.js","../external \"crypto\"",".././node_modules/vscode-jsonrpc/lib/socketSupport.js",".././node_modules/vscode-languageserver-types/lib/esm/main.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.js",".././node_modules/vscode-languageserver-protocol/lib/utils/is.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js",".././node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js",".././node_modules/vscode-languageclient/lib/codeConverter.js",".././node_modules/vscode-languageclient/lib/protocolConverter.js",".././node_modules/vscode-languageclient/lib/utils/async.js",".././node_modules/vscode-languageclient/lib/colorProvider.js",".././node_modules/vscode-languageclient/lib/configuration.js",".././node_modules/vscode-languageclient/lib/implementation.js",".././node_modules/vscode-languageclient/lib/typeDefinition.js",".././node_modules/vscode-languageclient/lib/workspaceFolders.js",".././node_modules/vscode-languageclient/lib/foldingRange.js",".././node_modules/vscode-languageclient/lib/declaration.js",".././node_modules/vscode-languageclient/lib/utils/processes.js",".././src/languageServer/javaServerStarter.ts",".././node_modules/fs.realpath/old.js",".././node_modules/brace-expansion/index.js",".././node_modules/concat-map/index.js",".././node_modules/balanced-match/index.js",".././node_modules/inherits/inherits.js",".././node_modules/inherits/inherits_browser.js","../external \"events\"",".././node_modules/glob/sync.js",".././node_modules/inflight/inflight.js",".././src/lsp-commands.ts",".././src/yaml/YamlSchema.ts",".././src/yaml/YamlConstants.ts",".././src/languageServer/plugin.ts",".././src/util/javaServerMode.ts"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","exports","require","__export","m","p","defineProperty","vscode_jsonrpc_1","ErrorCodes","ResponseError","CancellationToken","CancellationTokenSource","Disposable","Event","Emitter","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","RequestType","RequestType0","NotificationType","NotificationType0","MessageReader","MessageWriter","ConnectionStrategy","StreamMessageReader","StreamMessageWriter","IPCMessageReader","IPCMessageWriter","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","createProtocolConnection","reader","writer","logger","strategy","createMessageConnection","Is","messages_1","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","SocketMessageReader","messageWriter_1","SocketMessageWriter","events_1","cancellation_1","linkedMap_1","CancelNotification","ConnectionErrors","ConnectionState","type","NullLogger","freeze","error","warn","info","log","fromString","toLowerCase","Off","Messages","Verbose","toString","JSON","Text","ConnectionError","Error","code","message","super","this","setPrototypeOf","_createMessageConnection","messageReader","messageWriter","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","version","timer","tracer","starRequestHandler","undefined","requestHandlers","create","starNotificationHandler","notificationHandlers","messageQueue","LinkedMap","responsePromises","requestTokens","trace","traceFormat","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","disposeEmitter","createRequestQueueKey","id","addMessageToQueue","queue","isRequestMessage","set","isResponseMessage","cancelUndispatched","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","fire","triggerMessageQueue","size","setImmediate","shift","requestMessage","reply","resultOrError","method","startTime","jsonrpc","toJson","result","traceSendingResponse","write","replyError","data","params","stringify","logLSPMessage","traceReceivedRequest","requestHandler","element","handler","Date","now","cancellationSource","tokenKey","String","handlerResult","numberOfParams","token","array","promise","then","string","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","source","cancel","traceReceivedNotification","handleNotification","responseMessage","responsePromise","timerStart","traceReceivedResponse","reject","resolve","handleResponse","number","responseHandler","handleInvalidMessage","processMessageQueue","onClose","onError","callback","toCancel","response","delete","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","i","length","push","connection","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","func","sendRequest","throwIfNotListening","is","last","slice","map","Promise","traceSendingRequest","e","MessageWriteError","onCancellationRequested","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","boolean","event","onUnhandledNotification","onDispose","dispose","keys","forEach","listen","AlreadyListening","throwIfListening","inspect","console","verbose","candidate","input","output","read","end","isMessageWriter","Array","isArray","Number","stringArray","every","elem","typedArray","check","thenable","vscode_1","vscode_languageserver_protocol_1","c2p","p2c","async_1","UUID","ConsoleLogger","ErrorAction","CloseAction","RevealOutputChannelOn","State","ClientState","DefaultErrorHandler","name","restarts","_error","count","Continue","Shutdown","Restart","window","showErrorMessage","DoNotRestart","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_client","_event","_type","_middleware","_createParams","_selectorFilter","_selectors","Map","selectors","textDocument","selector","languages","match","registerOptions","documentSelector","_listener","values","notificationSent","_data","clear","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","DidOpenTextDocumentNotification","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","has","DidCloseTextDocumentFeature","onDidCloseTextDocument","DidCloseTextDocumentNotification","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","DidChangeTextDocumentNotification","change","TextDocumentSyncKind","None","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","document","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","WillSaveTextDocumentWaitUntilRequest","willSaveWaitUntil","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","DidSaveTextDocumentNotification","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","DidChangeWatchedFilesNotification","_capabilities","_documentSelector","_method","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","provider","registerLanguageProvider","WorkspaceFeature","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","completionProvider","options","triggerCharacters","provideCompletionItems","position","context","asCompletionParams","asCompletionResult","logFailedRequest","resolveCompletionItem","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","_options","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","codeActionKinds","provideCodeActions","range","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","DidChangeConfigurationNotification","section","synchronize","configurationSection","onDidChangeConfiguration","sections","some","affectsConfiguration","didChangeConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","path","current","obj","workspaceFolder","index","indexOf","getConfiguration","substr","split","ExecuteCommandFeature","_commands","ExecuteCommandRequest","executeCommandProvider","commands","command","registerCommand","args","arguments","MessageTransports","OnReady","_resolve","_reject","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","errorHandler","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","_state","oldState","getPublicState","newState","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","createOutputChannel","_trace","onReady","resolveConnection","responseError","stack","appendLine","toLocaleTimeString","data2String","Info","show","Warn","append","Stopping","isUsed","createDiagnosticCollection","onLogMessage","MessageType","Warning","onShowMessage","showWarningMessage","showInformationMessage","ShowMessageRequest","messageFunc","actions","onTelemetry","initialize","StartFailed","needsStop","stop","createConnection","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","process","pid","rootUri","Uri","file","computeClientCapabilities","workspaceFolders","fillInitializeParams","textDocumentSync","onDiagnostics","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","shutdown","exit","channel","diagnostics","listener","didChangeWatchedFiles","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","defaultTraceOptions","InitializeRequest","ShutdownRequest","ExitNotification","LogMessageNotification","ShowMessageNotification","TelemetryEventNotification","didOpenTextDocument","didChangeTextDocument","didCloseTextDocument","didSaveTextDocument","PublishDiagnosticsNotification","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","fillClientCapabilities","registration","registrations","unregistration","unregisterations","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","RequestCancelled","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","join","Math","floor","random","_chars","v4","empty","_UUIDPattern","isUUID","test","parse","_disposable","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","ret","callbacks","contexts","apply","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","invoke","MicroProfileLS","PROJECT_INFO_REQUEST","PROPERTY_DEFINITION_REQUEST","JSON_SCHEMA_FOR_PROJECT_INFO_REQUEST","JAVA_CODEACTION_REQUEST","JAVA_CODELENS_REQUEST","JAVA_COMPLETION_REQUEST","JAVA_DIAGNOSTICS_REQUEST","JAVA_HOVER_REQUEST","JAVA_FILE_INFO_REQUEST","JAVA_PROJECT_LABELS_REQUEST","PROPERTIES_CHANGED_NOTIFICATION","Commands","RELOAD_WINDOW","DefaultSize","CR","Buffer","from","LF","CRLF","MessageBuffer","encoding","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","ceil","concat","header","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","timeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","headers","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","clearTimeout","setTimeout","firePartialMessage","waitingTime","eventEmitter","socket","ContentLength","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","send","handleError","minimatch","Minimatch","sep","er","GLOBSTAR","expand","plTypes","open","close","qmark","star","twoStarDot","twoStarNoDot","reSpecials","reduce","c","slashSplit","ext","a","b","t","k","pattern","TypeError","nocomment","charAt","regexp","negate","comment","make","braceExpand","nobrace","filter","list","defaults","def","orig","debug","_made","parseNegate","globSet","globParts","s","si","negateOffset","nonegate","l","isSub","noglobstar","stateChar","re","hasMagic","nocase","escaping","patternListStack","negativeLists","inClass","reClassStart","classStart","patternStart","dot","self","clearStateChar","noext","reStart","pl","pop","reEnd","cs","substring","RegExp","sp","SUBPARSE","tail","replace","_","$1","$2","addPatternStart","n","nl","nlBefore","nlFirst","nlLast","nlAfter","openParensBefore","cleanAfter","dollar","globUnescape","flags","regExp","_glob","_src","makeRe","twoStar","regExpEscape","ex","mm","f","nonull","partial","filename","matchBase","matchOne","flipNegate","fi","pi","fl","hit","fr","pr","swallowee","posix","win32","exec","device","isUnc","platform","SemVer","env","NODE_DEBUG","unshift","SEMVER_SPEC_VERSION","MAX_LENGTH","MAX_SAFE_INTEGER","src","R","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULL","FULLPLAIN","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","raw","major","minor","patch","prerelease","num","build","format","valid","v","clean","compare","compareMain","comparePre","compareIdentifiers","inc","release","identifier","diff","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","op","Comparator","comp","semver","ANY","operator","rcompareIdentifiers","compareLoose","rcompare","sort","rsort","parseRange","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","to","tM","tm","tp","tpr","tb","testSet","allowed","satisfies","outside","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","r","intersects","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","M","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","thisComparator","rangeComparators","rangeComparator","toComparators","maxSatisfying","versions","max","maxSV","rangeObj","minSatisfying","min","minSV","minVersion","minver","compver","validRange","ltr","gtr","parsed","r1","r2","coerce","ProtocolCompletionItem","CompletionItem","label","default","ProtocolCodeLens","CodeLens","ProtocolDocumentLink","DocumentLink","glob","fs","rp","inherits","EE","EventEmitter","assert","isAbsolute","globSync","common","setopts","alphasort","alphasorti","ownProp","inflight","childrenIgnored","isIgnored","once","cb","sync","Glob","GlobSync","_didRealPath","matches","_processing","_emitQueue","_processQueue","paused","noprocess","done","_process","nextTick","_finish","options_","origin","extend","j","aborted","realpath","_didRealpath","_realpath","finish","emit","found","_realpathSet","next","matchset","_makeAbs","realpathCache","real","syscall","_mark","mark","makeAbs","abort","pause","resume","_emitMatch","pq","inGlobStar","_processSimple","remain","abs","_processGlobStar","_processReaddir","_readdir","entries","_processReaddir2","pn","rawGlob","dotOk","matchedEntries","stat","nomount","root","absolute","nodir","cache","st","statCache","_readdirInGlobStar","follow","lstatcb","lstat","isSym","isSymbolicLink","symlinks","isDirectory","readdir","_readdirError","_readdirEntries","readdirCb","cwdAbs","cwd","strict","silent","_processGlobStar2","remainWithoutGlobStar","gspref","noGlobStar","instead","below","_stat","exists","_processSimple2","trail","needDir","maxLength","statcb","_stat2","realpathSync","monkeypatch","unmonkeypatch","origRealpath","origRealpathSync","ok","old","newError","field","nounique","nosort","Infinity","ignore","ignoreMap","setupIgnores","changedCwd","nou","all","literal","notDir","isDir","slash","mabs","gmatcher","localeCompare","gpattern","matcher","wrappy","fn","wrapper","called","onceStrict","onceError","proto","configurable","languageClient","yamlSchemaCache","registerYamlSchemaSupport","bindRequest","request","executeCommand","waitForStandardMode","microprofileContributions","collectMicroProfileJavaExtensions","extensions","requirements","resolveRequirements","getDocumentSelector","getVSCodeMicroProfileSettings","extendedClientCapabilities","commandsKind","CommandKind","COMMAND_CONFIGURATION_UPDATE","COMMAND_OPEN_URI","serverOptions","prepareExecutable","microProfileContributions","jarPaths","contribution","jarExtensions","getMicroProfileJarExtensions","LanguageClient","subscriptions","handleExtensionChange","language","configMicroProfile","microprofile","connectToLS","evict","catch","selection","openUrl","registerConfigurationUpdateCommand","registerOpenURICommand","registerVSCodeCommands","expandHomeDir","findJavaHome","JAVA_FILENAME","parseMajorVersion","content","startsWith","javaVersion","openJDKDownload","cause","jdkUrl","replaceClose","javaHome","existsSync","allowJre","err","home","cp","execFile","stdout","stderr","checkJavaVersion","java_home","java_version","homedir","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","__generator","body","y","g","sent","trys","ops","verb","Symbol","iterator","__importStar","mod","__esModule","__importDefault","which_1","winreg_1","isWindows","jdkRegistryKeyPaths","jreRegistryKeyPaths","findJavaHomePromise","_a","JAVA_HOME","dir","javaFilename","statSync","findInRegistry","findInPath","proposed","findLinkedFile","lstatSync","readlinkSync","dirname","macUtility","execSync","keyPaths","promises","keysFoundSegments","keysFound","sortedKeysFound","_i","sortedKeysFound_1","res","promisifyFindPossibleRegKey","aVer","parseFloat","reg","keyPath","hive","HKLM","optionsOrCb","optional","error_1","which","cmd","pathEnv","PATH","COLON","pathExt","PATHEXT","ll","cur","isFile","isExe","mode","uid","gid","F","E","ii","getgid","getuid","absUnix","util","spawn","HIVES","REG_TYPES","KEY_PATTERN","PATH_PATTERN","ITEM_PATTERN","ProcessUncleanExitError","captureStackTrace","__defineGetter__","captureOutput","child","mkErrorMsg","registryCommand","pushArch","arch","archString","convertArchString","getRegExePath","windir","RegistryItem","host","_host","_hive","_key","_arch","Registry","lastIndexOf","HKCU","HKCR","HKU","HKCC","REG_SZ","REG_MULTI_SZ","REG_EXPAND_SZ","REG_DWORD","REG_QWORD","REG_BINARY","REG_NONE","DEFAULT_VALUE","proc","stdio","items","lines","lineNumber","line","erase","destroy","keyExists","valueExists","client_1","colorProvider_1","configuration_1","implementation_1","typeDefinition_1","workspaceFolders_1","foldingRange_1","declaration_1","processes_1","REQUIRED_VSCODE_VERSION","Executable","TransportKind","Transport","NodeModule","StreamInfo","ChildProcessInfo","ProposedFeatures","isSocket","port","detached","arg1","arg2","arg3","arg4","arg5","forceDebug","_serverOptions","_forceDebug","checkVersion","codeVersion","_serverProcess","toCheck","_isDetached","checkProcessDied","childProcess","kill","terminate","server","stdin","runDebug","run","v8debug","execArgv","arg","startedInDebugMode","_getServerWorkingDir","serverWorkingDir","node","transport","runtime","pipeName","ipc","pipe","fork","onConnected","protocol","execOptions","getEnvironment","serverProcess","registerFeatures","createAll","TypeDefinitionFeature","ImplementationFeature","ColorProviderFeature","WorkspaceFoldersFeature","FoldingRangeFeature","DeclarationFeature","_mainGetRootPath","stats","SettingMonitor","_setting","primary","rest","enabled","needsStart","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","MessageReadError","AbstractMessageType","_numberOfParams","isCancellationRequested","Cancelled","shortcutEvent","handle","MutableToken","_isCancelled","_emitter","_token","Touch","First","Last","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","tmpdir","connectResolve","connected","createServer","removeListener","Position","Location","LocationLink","ColorInformation","ColorPresentation","FoldingRangeKind","FoldingRange","DiagnosticRelatedInformation","DiagnosticSeverity","Diagnostic","TextEdit","CreateFile","RenameFile","DeleteFile","WorkspaceEdit","character","objectLiteral","one","two","three","four","defined","targetUri","targetRange","targetSelectionRange","originSelectionRange","red","green","blue","alpha","color","textEdit","additionalTextEdits","startLine","endLine","startCharacter","endCharacter","location","Information","Hint","severity","newText","insert","del","VersionedTextDocumentIdentifier","overwrite","ignoreIfExists","oldUri","newUri","recursive","ignoreIfNotExists","TextDocumentIdentifier","TextDocumentItem","MarkupContent","InsertTextFormat","CompletionList","MarkedString","Hover","ParameterInformation","SignatureInformation","DocumentHighlightKind","DocumentHighlight","SymbolInformation","TextEditChangeImpl","WorkspaceChange","_this","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","createFile","checkDocumentChanges","renameFile","deleteFile","languageId","text","isIncomplete","fromPlainText","plainText","contents","documentation","parameters","Read","Write","containerName","CodeActionContext","CodeAction","FormattingOptions","detail","selectionRange","children","deprecated","only","commandOrEdit","tabSize","insertSpaces","TextDocument","TextDocumentSaveReason","EOL","FullTextDocument","lineCount","getText","positionAt","offsetAt","applyEdits","sortedEdits","mergeSort","left","right","leftIdx","rightIdx","lastModifiedOffset","startOffset","endOffset","Manual","AfterDelay","FocusOut","_uri","_languageId","_version","_content","_lineOffsets","update","getLineOffsets","lineOffsets","isLineStart","offset","mid","lineOffset","nextLineOffset","protocol_implementation_1","ImplementationRequest","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","ConfigurationRequest","protocol_colorProvider_1","DocumentColorRequest","ColorPresentationRequest","protocol_foldingRange_1","FoldingRangeRequest","protocol_declaration_1","DeclarationRequest","DocumentFilter","Abort","Transactional","Undo","InitializeError","unknownProtocolVersion","Log","CompletionTriggerKind","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","_uriConverter","asVersionedTextDocumentIdentifier","asTextDocumentSaveReason","reason","asTriggerKind","triggerKind","asWorkerPosition","asDiagnosticSeverity","asDiagnostic","asTextEdit","isTextDocument","isTextDocumentChangeEvent","rangeLength","includeContent","triggerCharacter","protocolItem","original","asDocumentation","filterText","insertText","SnippetString","insertTextFormat","fromEdit","fillPrimaryInsertText","originalItemKind","sortText","commitCharacters","preselect","includeDeclaration","ls","CodeBlock","diagnostic","asDiagnosticRelatedInformation","information","asLocation","MarkdownString","asCompletionInsertText","itemKind","asSignatureInformations","asSignatureInformation","asParameterInformations","asParameterInformation","asLocationLink","asLocationResult","asDocumentHighlight","asDocumentHighlightKind","asSymbolKind","asSymbolInformation","asDocumentSymbol","kindMapping","asCodeActionKind","parts","Empty","part","asColor","asColorInformation","ci","asColorPresentation","presentation","asFoldingRangeKind","Comment","Imports","Region","asFoldingRange","hover","appendCodeblock","appendMarkdown","appendText","asHoverContent","SignatureHelp","activeSignature","activeParameter","signatures","asDeclarationResult","asCommands","asFoldingRanges","foldingRanges","asColorInformations","colorInformation","asColorPresentations","colorPresentations","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","colorProvider","implCapabilities","provideColorPresentations","requestParams","provideDocumentColors","registerColorProvider","configuration","scopeUri","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","access","asProtocol","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","added","removed","capability","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","registerFoldingRangeProvider","declarationSupport","declarationProvider","declCapabilities","provideDeclaration","registerDeclarationProvider","isMacintosh","isLinux","execFileSync","__dirname","spawnSync","DEBUG","hasDebugFlag","DEBUG_PORT","MICROPROFILE_SERVER_NAME","MICROPROFILE_SERVER_MAIN_CLASS","parseVMargs","vmargsLine","vmargs","microprofileJavaExtensions","executable","SUSPEND_SERVER","os","watchParentProcess","serverHome","mpJavaExtensionsClasspath","classpathSeperator","prepareParams","pathModule","maybeCallback","backtrace","missingCallback","throwDeprecation","noDeprecation","traceDeprecation","rethrow","normalize","nextPartRe","splitRootRe","pos","base","seenLinks","knownHard","lastIndex","resolvedLink","linkTarget","dev","ino","LOOP","gotResolvedLink","gotStat","gotTarget","readlink","concatMap","balanced","isTop","expansions","pre","isNumericSequence","isAlphaSequence","isSequence","isOptions","post","escClose","parseCommaParts","postParts","embrace","N","x","width","incr","pad","isPadded","fromCharCode","need","z","el","expansion","escSlash","escOpen","escComma","escPeriod","escapeBraces","unescapeBraces","charCodeAt","xs","maybeMatch","begs","beg","ai","bi","ctor","superCtor","super_","constructor","TempCtor","newPattern","readdirSync","reqs","RES","cbs","makeres","ConfigurationItemEditType","resolveConfigurationItemEdit","configItemEdit","editType","Add","configArray","includes","ConfigurationTarget","Workspace","addToPreferenceArray","Update","COMMAND_REFERENCES","COMMAND_IMPLEMENTATIONS","MicroProfilePropertiesScopeEnum","YamlSchemaCache","_languageClient","applicationYamlUri","yamlSchema","jsonSchema","scopes","projectURIs","projectURI","requestYamlSchemaUriCallback","vscode","visibleTextEditors","find","editor","endsWith","MICROPROFILE_SCHEMA_PREFIX","requestYamlSchemaContentCallback","parsedUri","MICROPROFILE_SCHEMA","getSchema","isEditorApplicationYaml","currentFileName","fileName","createInstallListener","onDidChangeActiveTextEditor","askInstallVSCodeYaml","withProgress","ProgressLocation","Notification","VSCODE_YAML_DISPLAY_NAME","VSCODE_YAML_EXTENSION_ID","installVSCodeYaml","VSCODE_YAML_INSTALL_SUCCESS","yamlPlugin","getExtension","isApplicationYamlOpened","activeTextEditor","VSCODE_YAML_NOT_INSTALLED_MESSAGE","packageJSON","VSCODE_YAML_LOW_VERSION_MESSAGE","activate","registerContributor","VSCODE_YAML_NO_REGISTRATION_MESSAGE","activateYamlExtension","appName","existingExtensions","extension","contributesSection","contributes","microprofileSection","setJarExtensionsIfExists","extensionPath","setDocumentSelectorIfExists","microprofileJavaExtensionPath","documentFilter","oldExtensions","Set","newExtensions","hasChanged","newExtension","JAVA_EXTENSION_ID","ServerMode","vscodeJava","api","serverMode","HYBRID","onDidServerModeChange","STANDARD","LIGHTWEIGHT","answer"],"mappings":"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","file":"extension.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","module.exports = require(\"vscode\");","module.exports = require(\"path\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","module.exports = require(\"fs\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.completionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.completionProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.hoverProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.signatureHelpProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.signatureHelpProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.definitionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.referencesProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentHighlightProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentSymbolProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: undefined\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    '',\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeActionProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let codeActionKinds = undefined;\r\n        if (!Is.boolean(capabilities.codeActionProvider)) {\r\n            codeActionKinds = capabilities.codeActionProvider.codeActionKinds;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: { documentSelector: documentSelector, codeActionKinds }\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.codeLensProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.codeLensProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentRangeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentOnTypeFormattingProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentOnTypeFormattingProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.renameProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        let options = Object.assign({}, { documentSelector: documentSelector });\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        else {\r\n            options.prepareProvider = capabilities.renameProvider.prepareProvider;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && result.range) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                return null;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.documentLinkProvider || !documentSelector) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilities.documentLinkProvider)\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.outputChannel.show(true);\r\n        }\r\n    }\r\n    logTrace(message, data) {\r\n        this.outputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.outputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.outputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.outputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp();\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel && this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        ensure(ensure(result, 'textDocument'), 'publishDiagnostics').relatedInformation = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","module.exports = require(\"child_process\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","module.exports = require(\"util\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","/**\n * Copyright 2019 Red Hat, Inc. and others.\n\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n *     http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// MicroProfile language server request and notifications\nexport namespace MicroProfileLS {\n  export const PROJECT_INFO_REQUEST = 'microprofile/projectInfo';\n  export const PROPERTY_DEFINITION_REQUEST = 'microprofile/propertyDefinition';\n  export const JSON_SCHEMA_FOR_PROJECT_INFO_REQUEST = 'microprofile/jsonSchemaForProjectInfo';\n  export const JAVA_CODEACTION_REQUEST = 'microprofile/java/codeAction';\n  export const JAVA_CODELENS_REQUEST = 'microprofile/java/codeLens';\n  export const JAVA_COMPLETION_REQUEST = 'microprofile/java/completion';\n  export const JAVA_DIAGNOSTICS_REQUEST = 'microprofile/java/diagnostics';\n  export const JAVA_HOVER_REQUEST = 'microprofile/java/hover';\n  export const JAVA_FILE_INFO_REQUEST = 'microprofile/java/fileInfo';\n  export const JAVA_PROJECT_LABELS_REQUEST = 'microprofile/java/projectLabels';\n  export const PROPERTIES_CHANGED_NOTIFICATION = 'microprofile/propertiesChanged';\n}\n\nexport namespace Commands {\n  export const RELOAD_WINDOW = 'workbench.action.reloadWindow';\n}\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't recevied the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer recevied error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","module.exports = minimatch\nminimatch.Minimatch = Minimatch\n\nvar path = { sep: '/' }\ntry {\n  path = require('path')\n} catch (er) {}\n\nvar GLOBSTAR = minimatch.GLOBSTAR = Minimatch.GLOBSTAR = {}\nvar expand = require('brace-expansion')\n\nvar plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nvar qmark = '[^/]'\n\n// * => any number of characters\nvar star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nvar twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nvar twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// characters that need to be escaped in RegExp.\nvar reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// \"abc\" -> { a:true, b:true, c:true }\nfunction charSet (s) {\n  return s.split('').reduce(function (set, c) {\n    set[c] = true\n    return set\n  }, {})\n}\n\n// normalizes slashes.\nvar slashSplit = /\\/+/\n\nminimatch.filter = filter\nfunction filter (pattern, options) {\n  options = options || {}\n  return function (p, i, list) {\n    return minimatch(p, pattern, options)\n  }\n}\n\nfunction ext (a, b) {\n  a = a || {}\n  b = b || {}\n  var t = {}\n  Object.keys(b).forEach(function (k) {\n    t[k] = b[k]\n  })\n  Object.keys(a).forEach(function (k) {\n    t[k] = a[k]\n  })\n  return t\n}\n\nminimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return minimatch\n\n  var orig = minimatch\n\n  var m = function minimatch (p, pattern, options) {\n    return orig.minimatch(p, pattern, ext(def, options))\n  }\n\n  m.Minimatch = function Minimatch (pattern, options) {\n    return new orig.Minimatch(pattern, ext(def, options))\n  }\n\n  return m\n}\n\nMinimatch.defaults = function (def) {\n  if (!def || !Object.keys(def).length) return Minimatch\n  return minimatch.defaults(def).Minimatch\n}\n\nfunction minimatch (p, pattern, options) {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  // \"\" only matches \"\"\n  if (pattern.trim() === '') return p === ''\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nfunction Minimatch (pattern, options) {\n  if (!(this instanceof Minimatch)) {\n    return new Minimatch(pattern, options)\n  }\n\n  if (typeof pattern !== 'string') {\n    throw new TypeError('glob pattern string required')\n  }\n\n  if (!options) options = {}\n  pattern = pattern.trim()\n\n  // windows support: need to use /, not \\\n  if (path.sep !== '/') {\n    pattern = pattern.split(path.sep).join('/')\n  }\n\n  this.options = options\n  this.set = []\n  this.pattern = pattern\n  this.regexp = null\n  this.negate = false\n  this.comment = false\n  this.empty = false\n\n  // make the set of regexps etc.\n  this.make()\n}\n\nMinimatch.prototype.debug = function () {}\n\nMinimatch.prototype.make = make\nfunction make () {\n  // don't do it more than once.\n  if (this._made) return\n\n  var pattern = this.pattern\n  var options = this.options\n\n  // empty patterns and comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    this.comment = true\n    return\n  }\n  if (!pattern) {\n    this.empty = true\n    return\n  }\n\n  // step 1: figure out negation, etc.\n  this.parseNegate()\n\n  // step 2: expand braces\n  var set = this.globSet = this.braceExpand()\n\n  if (options.debug) this.debug = console.error\n\n  this.debug(this.pattern, set)\n\n  // step 3: now we have a set, so turn each one into a series of path-portion\n  // matching patterns.\n  // These will be regexps, except in the case of \"**\", which is\n  // set to the GLOBSTAR object for globstar behavior,\n  // and will not contain any / characters\n  set = this.globParts = set.map(function (s) {\n    return s.split(slashSplit)\n  })\n\n  this.debug(this.pattern, set)\n\n  // glob --> regexps\n  set = set.map(function (s, si, set) {\n    return s.map(this.parse, this)\n  }, this)\n\n  this.debug(this.pattern, set)\n\n  // filter out everything that didn't compile properly.\n  set = set.filter(function (s) {\n    return s.indexOf(false) === -1\n  })\n\n  this.debug(this.pattern, set)\n\n  this.set = set\n}\n\nMinimatch.prototype.parseNegate = parseNegate\nfunction parseNegate () {\n  var pattern = this.pattern\n  var negate = false\n  var options = this.options\n  var negateOffset = 0\n\n  if (options.nonegate) return\n\n  for (var i = 0, l = pattern.length\n    ; i < l && pattern.charAt(i) === '!'\n    ; i++) {\n    negate = !negate\n    negateOffset++\n  }\n\n  if (negateOffset) this.pattern = pattern.substr(negateOffset)\n  this.negate = negate\n}\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = function (pattern, options) {\n  return braceExpand(pattern, options)\n}\n\nMinimatch.prototype.braceExpand = braceExpand\n\nfunction braceExpand (pattern, options) {\n  if (!options) {\n    if (this instanceof Minimatch) {\n      options = this.options\n    } else {\n      options = {}\n    }\n  }\n\n  pattern = typeof pattern === 'undefined'\n    ? this.pattern : pattern\n\n  if (typeof pattern === 'undefined') {\n    throw new TypeError('undefined pattern')\n  }\n\n  if (options.nobrace ||\n    !pattern.match(/\\{.*\\}/)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nMinimatch.prototype.parse = parse\nvar SUBPARSE = {}\nfunction parse (pattern, isSub) {\n  if (pattern.length > 1024 * 64) {\n    throw new TypeError('pattern is too long')\n  }\n\n  var options = this.options\n\n  // shortcuts\n  if (!options.noglobstar && pattern === '**') return GLOBSTAR\n  if (pattern === '') return ''\n\n  var re = ''\n  var hasMagic = !!options.nocase\n  var escaping = false\n  // ? => one single character\n  var patternListStack = []\n  var negativeLists = []\n  var stateChar\n  var inClass = false\n  var reClassStart = -1\n  var classStart = -1\n  // . and .. never match anything that doesn't start with .,\n  // even when options.dot is set.\n  var patternStart = pattern.charAt(0) === '.' ? '' // anything\n  // not (start or / followed by . or .. followed by / or end)\n  : options.dot ? '(?!(?:^|\\\\\\/)\\\\.{1,2}(?:$|\\\\\\/))'\n  : '(?!\\\\.)'\n  var self = this\n\n  function clearStateChar () {\n    if (stateChar) {\n      // we had some state-tracking character\n      // that wasn't consumed by this pass.\n      switch (stateChar) {\n        case '*':\n          re += star\n          hasMagic = true\n        break\n        case '?':\n          re += qmark\n          hasMagic = true\n        break\n        default:\n          re += '\\\\' + stateChar\n        break\n      }\n      self.debug('clearStateChar %j %j', stateChar, re)\n      stateChar = false\n    }\n  }\n\n  for (var i = 0, len = pattern.length, c\n    ; (i < len) && (c = pattern.charAt(i))\n    ; i++) {\n    this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n    // skip over any that are escaped.\n    if (escaping && reSpecials[c]) {\n      re += '\\\\' + c\n      escaping = false\n      continue\n    }\n\n    switch (c) {\n      case '/':\n        // completely not allowed, even escaped.\n        // Should already be path-split by now.\n        return false\n\n      case '\\\\':\n        clearStateChar()\n        escaping = true\n      continue\n\n      // the various stateChar values\n      // for the \"extglob\" stuff.\n      case '?':\n      case '*':\n      case '+':\n      case '@':\n      case '!':\n        this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n        // all of those are literals inside a class, except that\n        // the glob [!a] means [^a] in regexp\n        if (inClass) {\n          this.debug('  in class')\n          if (c === '!' && i === classStart + 1) c = '^'\n          re += c\n          continue\n        }\n\n        // if we already have a stateChar, then it means\n        // that there was something like ** or +? in there.\n        // Handle the stateChar, then proceed with this one.\n        self.debug('call clearStateChar %j', stateChar)\n        clearStateChar()\n        stateChar = c\n        // if extglob is disabled, then +(asdf|foo) isn't a thing.\n        // just clear the statechar *now*, rather than even diving into\n        // the patternList stuff.\n        if (options.noext) clearStateChar()\n      continue\n\n      case '(':\n        if (inClass) {\n          re += '('\n          continue\n        }\n\n        if (!stateChar) {\n          re += '\\\\('\n          continue\n        }\n\n        patternListStack.push({\n          type: stateChar,\n          start: i - 1,\n          reStart: re.length,\n          open: plTypes[stateChar].open,\n          close: plTypes[stateChar].close\n        })\n        // negation is (?:(?!js)[^/]*)\n        re += stateChar === '!' ? '(?:(?!(?:' : '(?:'\n        this.debug('plType %j %j', stateChar, re)\n        stateChar = false\n      continue\n\n      case ')':\n        if (inClass || !patternListStack.length) {\n          re += '\\\\)'\n          continue\n        }\n\n        clearStateChar()\n        hasMagic = true\n        var pl = patternListStack.pop()\n        // negation is (?:(?!js)[^/]*)\n        // The others are (?:<pattern>)<type>\n        re += pl.close\n        if (pl.type === '!') {\n          negativeLists.push(pl)\n        }\n        pl.reEnd = re.length\n      continue\n\n      case '|':\n        if (inClass || !patternListStack.length || escaping) {\n          re += '\\\\|'\n          escaping = false\n          continue\n        }\n\n        clearStateChar()\n        re += '|'\n      continue\n\n      // these are mostly the same in regexp and glob\n      case '[':\n        // swallow any state-tracking char before the [\n        clearStateChar()\n\n        if (inClass) {\n          re += '\\\\' + c\n          continue\n        }\n\n        inClass = true\n        classStart = i\n        reClassStart = re.length\n        re += c\n      continue\n\n      case ']':\n        //  a right bracket shall lose its special\n        //  meaning and represent itself in\n        //  a bracket expression if it occurs\n        //  first in the list.  -- POSIX.2 2.8.3.2\n        if (i === classStart + 1 || !inClass) {\n          re += '\\\\' + c\n          escaping = false\n          continue\n        }\n\n        // handle the case where we left a class open.\n        // \"[z-a]\" is valid, equivalent to \"\\[z-a\\]\"\n        if (inClass) {\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          var cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + cs + ']')\n          } catch (er) {\n            // not a valid class!\n            var sp = this.parse(cs, SUBPARSE)\n            re = re.substr(0, reClassStart) + '\\\\[' + sp[0] + '\\\\]'\n            hasMagic = hasMagic || sp[1]\n            inClass = false\n            continue\n          }\n        }\n\n        // finish up the class.\n        hasMagic = true\n        inClass = false\n        re += c\n      continue\n\n      default:\n        // swallow any state char that wasn't consumed\n        clearStateChar()\n\n        if (escaping) {\n          // no need\n          escaping = false\n        } else if (reSpecials[c]\n          && !(c === '^' && inClass)) {\n          re += '\\\\'\n        }\n\n        re += c\n\n    } // switch\n  } // for\n\n  // handle the case where we left a class open.\n  // \"[abc\" is valid, equivalent to \"\\[abc\"\n  if (inClass) {\n    // split where the last [ was, and escape it\n    // this is a huge pita.  We now have to re-walk\n    // the contents of the would-be class to re-translate\n    // any characters that were passed through as-is\n    cs = pattern.substr(classStart + 1)\n    sp = this.parse(cs, SUBPARSE)\n    re = re.substr(0, reClassStart) + '\\\\[' + sp[0]\n    hasMagic = hasMagic || sp[1]\n  }\n\n  // handle the case where we had a +( thing at the *end*\n  // of the pattern.\n  // each pattern list stack adds 3 chars, and we need to go through\n  // and escape any | chars that were passed through as-is for the regexp.\n  // Go through and escape them, taking care not to double-escape any\n  // | chars that were already escaped.\n  for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n    var tail = re.slice(pl.reStart + pl.open.length)\n    this.debug('setting tail', re, pl)\n    // maybe some even number of \\, then maybe 1 \\, followed by a |\n    tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, function (_, $1, $2) {\n      if (!$2) {\n        // the | isn't already escaped, so escape it.\n        $2 = '\\\\'\n      }\n\n      // need to escape all those slashes *again*, without escaping the\n      // one that we need for escaping the | character.  As it works out,\n      // escaping an even number of slashes can be done by simply repeating\n      // it exactly after itself.  That's why this trick works.\n      //\n      // I am sorry that you have to see this.\n      return $1 + $1 + $2 + '|'\n    })\n\n    this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n    var t = pl.type === '*' ? star\n      : pl.type === '?' ? qmark\n      : '\\\\' + pl.type\n\n    hasMagic = true\n    re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n  }\n\n  // handle trailing things that only matter at the very end.\n  clearStateChar()\n  if (escaping) {\n    // trailing \\\\\n    re += '\\\\\\\\'\n  }\n\n  // only need to apply the nodot start if the re starts with\n  // something that could conceivably capture a dot\n  var addPatternStart = false\n  switch (re.charAt(0)) {\n    case '.':\n    case '[':\n    case '(': addPatternStart = true\n  }\n\n  // Hack to work around lack of negative lookbehind in JS\n  // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n  // like 'a.xyz.yz' doesn't match.  So, the first negative\n  // lookahead, has to look ALL the way ahead, to the end of\n  // the pattern.\n  for (var n = negativeLists.length - 1; n > -1; n--) {\n    var nl = negativeLists[n]\n\n    var nlBefore = re.slice(0, nl.reStart)\n    var nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n    var nlLast = re.slice(nl.reEnd - 8, nl.reEnd)\n    var nlAfter = re.slice(nl.reEnd)\n\n    nlLast += nlAfter\n\n    // Handle nested stuff like *(*.js|!(*.json)), where open parens\n    // mean that we should *not* include the ) in the bit that is considered\n    // \"after\" the negated section.\n    var openParensBefore = nlBefore.split('(').length - 1\n    var cleanAfter = nlAfter\n    for (i = 0; i < openParensBefore; i++) {\n      cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n    }\n    nlAfter = cleanAfter\n\n    var dollar = ''\n    if (nlAfter === '' && isSub !== SUBPARSE) {\n      dollar = '$'\n    }\n    var newRe = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    re = newRe\n  }\n\n  // if the re is not \"\" at this point, then we need to make sure\n  // it doesn't match against an empty path part.\n  // Otherwise a/* will match a/, which it should not.\n  if (re !== '' && hasMagic) {\n    re = '(?=.)' + re\n  }\n\n  if (addPatternStart) {\n    re = patternStart + re\n  }\n\n  // parsing just a piece of a larger pattern.\n  if (isSub === SUBPARSE) {\n    return [re, hasMagic]\n  }\n\n  // skip the regexp for non-magical patterns\n  // unescape anything in it, though, so that it'll be\n  // an exact match against a file etc.\n  if (!hasMagic) {\n    return globUnescape(pattern)\n  }\n\n  var flags = options.nocase ? 'i' : ''\n  try {\n    var regExp = new RegExp('^' + re + '$', flags)\n  } catch (er) {\n    // If it was an invalid regular expression, then it can't match\n    // anything.  This trick looks for a character after the end of\n    // the string, which is of course impossible, except in multi-line\n    // mode, but it's not a /m regex.\n    return new RegExp('$.')\n  }\n\n  regExp._glob = pattern\n  regExp._src = re\n\n  return regExp\n}\n\nminimatch.makeRe = function (pattern, options) {\n  return new Minimatch(pattern, options || {}).makeRe()\n}\n\nMinimatch.prototype.makeRe = makeRe\nfunction makeRe () {\n  if (this.regexp || this.regexp === false) return this.regexp\n\n  // at this point, this.set is a 2d array of partial\n  // pattern strings, or \"**\".\n  //\n  // It's better to use .match().  This function shouldn't\n  // be used, really, but it's pretty convenient sometimes,\n  // when you just want to work with a regex.\n  var set = this.set\n\n  if (!set.length) {\n    this.regexp = false\n    return this.regexp\n  }\n  var options = this.options\n\n  var twoStar = options.noglobstar ? star\n    : options.dot ? twoStarDot\n    : twoStarNoDot\n  var flags = options.nocase ? 'i' : ''\n\n  var re = set.map(function (pattern) {\n    return pattern.map(function (p) {\n      return (p === GLOBSTAR) ? twoStar\n      : (typeof p === 'string') ? regExpEscape(p)\n      : p._src\n    }).join('\\\\\\/')\n  }).join('|')\n\n  // must match entire pattern\n  // ending in a * or ** will make it less strict.\n  re = '^(?:' + re + ')$'\n\n  // can match anything, as long as it's not this.\n  if (this.negate) re = '^(?!' + re + ').*$'\n\n  try {\n    this.regexp = new RegExp(re, flags)\n  } catch (ex) {\n    this.regexp = false\n  }\n  return this.regexp\n}\n\nminimatch.match = function (list, pattern, options) {\n  options = options || {}\n  var mm = new Minimatch(pattern, options)\n  list = list.filter(function (f) {\n    return mm.match(f)\n  })\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\nMinimatch.prototype.match = match\nfunction match (f, partial) {\n  this.debug('match', f, this.pattern)\n  // short-circuit in the case of busted things.\n  // comments, etc.\n  if (this.comment) return false\n  if (this.empty) return f === ''\n\n  if (f === '/' && partial) return true\n\n  var options = this.options\n\n  // windows: need to use /, not \\\n  if (path.sep !== '/') {\n    f = f.split(path.sep).join('/')\n  }\n\n  // treat the test path as a set of pathparts.\n  f = f.split(slashSplit)\n  this.debug(this.pattern, 'split', f)\n\n  // just ONE of the pattern sets in this.set needs to match\n  // in order for it to be valid.  If negating, then just one\n  // match means that we have failed.\n  // Either way, return on the first hit.\n\n  var set = this.set\n  this.debug(this.pattern, 'set', set)\n\n  // Find the basename of the path by looking for the last non-empty segment\n  var filename\n  var i\n  for (i = f.length - 1; i >= 0; i--) {\n    filename = f[i]\n    if (filename) break\n  }\n\n  for (i = 0; i < set.length; i++) {\n    var pattern = set[i]\n    var file = f\n    if (options.matchBase && pattern.length === 1) {\n      file = [filename]\n    }\n    var hit = this.matchOne(file, pattern, partial)\n    if (hit) {\n      if (options.flipNegate) return true\n      return !this.negate\n    }\n  }\n\n  // didn't get any hits.  this is success if it's a negative\n  // pattern, failure otherwise.\n  if (options.flipNegate) return false\n  return this.negate\n}\n\n// set partial to true to test if, for example,\n// \"/a/b\" matches the start of \"/*/b/*/d\"\n// Partial means, if you run out of file before you run\n// out of pattern, then that's fine, as long as all\n// the parts match.\nMinimatch.prototype.matchOne = function (file, pattern, partial) {\n  var options = this.options\n\n  this.debug('matchOne',\n    { 'this': this, file: file, pattern: pattern })\n\n  this.debug('matchOne', file.length, pattern.length)\n\n  for (var fi = 0,\n      pi = 0,\n      fl = file.length,\n      pl = pattern.length\n      ; (fi < fl) && (pi < pl)\n      ; fi++, pi++) {\n    this.debug('matchOne loop')\n    var p = pattern[pi]\n    var f = file[fi]\n\n    this.debug(pattern, p, f)\n\n    // should be impossible.\n    // some invalid regexp stuff in the set.\n    if (p === false) return false\n\n    if (p === GLOBSTAR) {\n      this.debug('GLOBSTAR', [pattern, p, f])\n\n      // \"**\"\n      // a/**/b/**/c would match the following:\n      // a/b/x/y/z/c\n      // a/x/y/z/b/c\n      // a/b/x/b/x/c\n      // a/b/c\n      // To do this, take the rest of the pattern after\n      // the **, and see if it would match the file remainder.\n      // If so, return success.\n      // If not, the ** \"swallows\" a segment, and try again.\n      // This is recursively awful.\n      //\n      // a/**/b/**/c matching a/b/x/y/z/c\n      // - a matches a\n      // - doublestar\n      //   - matchOne(b/x/y/z/c, b/**/c)\n      //     - b matches b\n      //     - doublestar\n      //       - matchOne(x/y/z/c, c) -> no\n      //       - matchOne(y/z/c, c) -> no\n      //       - matchOne(z/c, c) -> no\n      //       - matchOne(c, c) yes, hit\n      var fr = fi\n      var pr = pi + 1\n      if (pr === pl) {\n        this.debug('** at the end')\n        // a ** at the end will just swallow the rest.\n        // We have found a match.\n        // however, it will not swallow /.x, unless\n        // options.dot is set.\n        // . and .. are *never* matched by **, for explosively\n        // exponential reasons.\n        for (; fi < fl; fi++) {\n          if (file[fi] === '.' || file[fi] === '..' ||\n            (!options.dot && file[fi].charAt(0) === '.')) return false\n        }\n        return true\n      }\n\n      // ok, let's see if we can swallow whatever we can.\n      while (fr < fl) {\n        var swallowee = file[fr]\n\n        this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n        // XXX remove this slice.  Just pass the start index.\n        if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n          this.debug('globstar found match!', fr, fl, swallowee)\n          // found a match.\n          return true\n        } else {\n          // can't swallow \".\" or \"..\" ever.\n          // can only swallow \".foo\" when explicitly asked.\n          if (swallowee === '.' || swallowee === '..' ||\n            (!options.dot && swallowee.charAt(0) === '.')) {\n            this.debug('dot detected!', file, fr, pattern, pr)\n            break\n          }\n\n          // ** swallows a segment, and continue.\n          this.debug('globstar swallow a segment, and continue')\n          fr++\n        }\n      }\n\n      // no match was found.\n      // However, in partial mode, we can't say this is necessarily over.\n      // If there's more *pattern* left, then\n      if (partial) {\n        // ran out of file\n        this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n        if (fr === fl) return true\n      }\n      return false\n    }\n\n    // something other than **\n    // non-magic patterns just have to match exactly\n    // patterns with magic have been turned into regexps.\n    var hit\n    if (typeof p === 'string') {\n      if (options.nocase) {\n        hit = f.toLowerCase() === p.toLowerCase()\n      } else {\n        hit = f === p\n      }\n      this.debug('string match', p, f, hit)\n    } else {\n      hit = f.match(p)\n      this.debug('pattern match', p, f, hit)\n    }\n\n    if (!hit) return false\n  }\n\n  // Note: ending in / means that we'll get a final \"\"\n  // at the end of the pattern.  This can only match a\n  // corresponding \"\" at the end of the file.\n  // If the file ends in /, then it can only match a\n  // a pattern that ends in /, unless the pattern just\n  // doesn't have any more for it. But, a/b/ should *not*\n  // match \"a/b/*\", even though \"\" matches against the\n  // [^/]*? pattern, except in partial mode, where it might\n  // simply not be reached yet.\n  // However, a/b/ should still satisfy a/*\n\n  // now either we fell off the end of the pattern, or we're done.\n  if (fi === fl && pi === pl) {\n    // ran out of pattern and filename at the same time.\n    // an exact hit!\n    return true\n  } else if (fi === fl) {\n    // ran out of file, but still had pattern left.\n    // this is ok if we're doing the match as part of\n    // a glob fs traversal.\n    return partial\n  } else if (pi === pl) {\n    // ran out of pattern, still have file left.\n    // this is only acceptable if we're on the very last\n    // empty segment of a file with a trailing slash.\n    // a/* should match a/b/\n    var emptyFileEnd = (fi === fl - 1) && (file[fi] === '')\n    return emptyFileEnd\n  }\n\n  // should be unreachable.\n  throw new Error('wtf?')\n}\n\n// replace stuff like \\* with *\nfunction globUnescape (s) {\n  return s.replace(/\\\\(.)/g, '$1')\n}\n\nfunction regExpEscape (s) {\n  return s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\n}\n","'use strict';\n\nfunction posix(path) {\n\treturn path.charAt(0) === '/';\n}\n\nfunction win32(path) {\n\t// https://github.com/nodejs/node/blob/b3fcc245fb25539909ef1d5eaa01dbf92e168633/lib/path.js#L56\n\tvar splitDeviceRe = /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/]+[^\\\\\\/]+)?([\\\\\\/])?([\\s\\S]*?)$/;\n\tvar result = splitDeviceRe.exec(path);\n\tvar device = result[1] || '';\n\tvar isUnc = Boolean(device && device.charAt(1) !== ':');\n\n\t// UNC paths are always absolute\n\treturn Boolean(result[2] || isUnc);\n}\n\nmodule.exports = process.platform === 'win32' ? win32 : posix;\nmodule.exports.posix = posix;\nmodule.exports.win32 = win32;\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar R = 0\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\nvar NUMERICIDENTIFIER = R++\nsrc[NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\nvar NUMERICIDENTIFIERLOOSE = R++\nsrc[NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\nvar NONNUMERICIDENTIFIER = R++\nsrc[NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\nvar MAINVERSION = R++\nsrc[MAINVERSION] = '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[NUMERICIDENTIFIER] + ')'\n\nvar MAINVERSIONLOOSE = R++\nsrc[MAINVERSIONLOOSE] = '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\nvar PRERELEASEIDENTIFIER = R++\nsrc[PRERELEASEIDENTIFIER] = '(?:' + src[NUMERICIDENTIFIER] +\n                            '|' + src[NONNUMERICIDENTIFIER] + ')'\n\nvar PRERELEASEIDENTIFIERLOOSE = R++\nsrc[PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\nvar PRERELEASE = R++\nsrc[PRERELEASE] = '(?:-(' + src[PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[PRERELEASEIDENTIFIER] + ')*))'\n\nvar PRERELEASELOOSE = R++\nsrc[PRERELEASELOOSE] = '(?:-?(' + src[PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\nvar BUILDIDENTIFIER = R++\nsrc[BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\nvar BUILD = R++\nsrc[BUILD] = '(?:\\\\+(' + src[BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\nvar FULL = R++\nvar FULLPLAIN = 'v?' + src[MAINVERSION] +\n                src[PRERELEASE] + '?' +\n                src[BUILD] + '?'\n\nsrc[FULL] = '^' + FULLPLAIN + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\nvar LOOSEPLAIN = '[v=\\\\s]*' + src[MAINVERSIONLOOSE] +\n                 src[PRERELEASELOOSE] + '?' +\n                 src[BUILD] + '?'\n\nvar LOOSE = R++\nsrc[LOOSE] = '^' + LOOSEPLAIN + '$'\n\nvar GTLT = R++\nsrc[GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\nvar XRANGEIDENTIFIERLOOSE = R++\nsrc[XRANGEIDENTIFIERLOOSE] = src[NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\nvar XRANGEIDENTIFIER = R++\nsrc[XRANGEIDENTIFIER] = src[NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\nvar XRANGEPLAIN = R++\nsrc[XRANGEPLAIN] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[PRERELEASE] + ')?' +\n                   src[BUILD] + '?' +\n                   ')?)?'\n\nvar XRANGEPLAINLOOSE = R++\nsrc[XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[PRERELEASELOOSE] + ')?' +\n                        src[BUILD] + '?' +\n                        ')?)?'\n\nvar XRANGE = R++\nsrc[XRANGE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAIN] + '$'\nvar XRANGELOOSE = R++\nsrc[XRANGELOOSE] = '^' + src[GTLT] + '\\\\s*' + src[XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\nvar COERCE = R++\nsrc[COERCE] = '(?:^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\nvar LONETILDE = R++\nsrc[LONETILDE] = '(?:~>?)'\n\nvar TILDETRIM = R++\nsrc[TILDETRIM] = '(\\\\s*)' + src[LONETILDE] + '\\\\s+'\nre[TILDETRIM] = new RegExp(src[TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\nvar TILDE = R++\nsrc[TILDE] = '^' + src[LONETILDE] + src[XRANGEPLAIN] + '$'\nvar TILDELOOSE = R++\nsrc[TILDELOOSE] = '^' + src[LONETILDE] + src[XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\nvar LONECARET = R++\nsrc[LONECARET] = '(?:\\\\^)'\n\nvar CARETTRIM = R++\nsrc[CARETTRIM] = '(\\\\s*)' + src[LONECARET] + '\\\\s+'\nre[CARETTRIM] = new RegExp(src[CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\nvar CARET = R++\nsrc[CARET] = '^' + src[LONECARET] + src[XRANGEPLAIN] + '$'\nvar CARETLOOSE = R++\nsrc[CARETLOOSE] = '^' + src[LONECARET] + src[XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\nvar COMPARATORLOOSE = R++\nsrc[COMPARATORLOOSE] = '^' + src[GTLT] + '\\\\s*(' + LOOSEPLAIN + ')$|^$'\nvar COMPARATOR = R++\nsrc[COMPARATOR] = '^' + src[GTLT] + '\\\\s*(' + FULLPLAIN + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\nvar COMPARATORTRIM = R++\nsrc[COMPARATORTRIM] = '(\\\\s*)' + src[GTLT] +\n                      '\\\\s*(' + LOOSEPLAIN + '|' + src[XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[COMPARATORTRIM] = new RegExp(src[COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\nvar HYPHENRANGE = R++\nsrc[HYPHENRANGE] = '^\\\\s*(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\nvar HYPHENRANGELOOSE = R++\nsrc[HYPHENRANGELOOSE] = '^\\\\s*(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\nvar STAR = R++\nsrc[STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[LOOSE] : re[FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[LOOSE] : re[FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compare(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.rcompare(a, b, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1]\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[HYPHENRANGELOOSE] : re[HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[COMPARATORLOOSE] : re[COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return thisComparators.every(function (thisComparator) {\n      return range.set.some(function (rangeComparators) {\n        return rangeComparators.every(function (rangeComparator) {\n          return thisComparator.intersects(rangeComparator, options)\n        })\n      })\n    })\n  })\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[TILDELOOSE] : re[TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[CARETLOOSE] : re[CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[XRANGELOOSE] : re[XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p\n    } else if (xm) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[STAR], '')\n}\n\n// This function is passed to string.replace(re[HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    version = new SemVer(version, this.options)\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  var match = version.match(re[COERCE])\n\n  if (match == null) {\n    return null\n  }\n\n  return parse(match[1] +\n    '.' + (match[2] || '0') +\n    '.' + (match[3] || '0'))\n}\n","module.exports = require(\"os\");","module.exports = require(\"net\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","// Approach:\n//\n// 1. Get the minimatch set\n// 2. For each pattern in the set, PROCESS(pattern, false)\n// 3. Store matches per-set, then uniq them\n//\n// PROCESS(pattern, inGlobStar)\n// Get the first [n] items from pattern that are all strings\n// Join these together.  This is PREFIX.\n//   If there is no more remaining, then stat(PREFIX) and\n//   add to matches if it succeeds.  END.\n//\n// If inGlobStar and PREFIX is symlink and points to dir\n//   set ENTRIES = []\n// else readdir(PREFIX) as ENTRIES\n//   If fail, END\n//\n// with ENTRIES\n//   If pattern[n] is GLOBSTAR\n//     // handle the case where the globstar match is empty\n//     // by pruning it out, and testing the resulting pattern\n//     PROCESS(pattern[0..n] + pattern[n+1 .. $], false)\n//     // handle other cases.\n//     for ENTRY in ENTRIES (not dotfiles)\n//       // attach globstar + tail onto the entry\n//       // Mark that this entry is a globstar match\n//       PROCESS(pattern[0..n] + ENTRY + pattern[n .. $], true)\n//\n//   else // not globstar\n//     for ENTRY in ENTRIES (not dotfiles, unless pattern[n] is dot)\n//       Test ENTRY against pattern[n]\n//       If fails, continue\n//       If passes, PROCESS(pattern[0..n] + item + pattern[n+1 .. $])\n//\n// Caveat:\n//   Cache all stats and readdirs results to minimize syscall.  Since all\n//   we ever care about is existence and directory-ness, we can just keep\n//   `true` for files, and [children,...] for directories, or `false` for\n//   things that don't exist.\n\nmodule.exports = glob\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar inherits = require('inherits')\nvar EE = require('events').EventEmitter\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar globSync = require('./sync.js')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar inflight = require('inflight')\nvar util = require('util')\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nvar once = require('once')\n\nfunction glob (pattern, options, cb) {\n  if (typeof options === 'function') cb = options, options = {}\n  if (!options) options = {}\n\n  if (options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return globSync(pattern, options)\n  }\n\n  return new Glob(pattern, options, cb)\n}\n\nglob.sync = globSync\nvar GlobSync = glob.GlobSync = globSync.GlobSync\n\n// old api surface\nglob.glob = glob\n\nfunction extend (origin, add) {\n  if (add === null || typeof add !== 'object') {\n    return origin\n  }\n\n  var keys = Object.keys(add)\n  var i = keys.length\n  while (i--) {\n    origin[keys[i]] = add[keys[i]]\n  }\n  return origin\n}\n\nglob.hasMagic = function (pattern, options_) {\n  var options = extend({}, options_)\n  options.noprocess = true\n\n  var g = new Glob(pattern, options)\n  var set = g.minimatch.set\n\n  if (!pattern)\n    return false\n\n  if (set.length > 1)\n    return true\n\n  for (var j = 0; j < set[0].length; j++) {\n    if (typeof set[0][j] !== 'string')\n      return true\n  }\n\n  return false\n}\n\nglob.Glob = Glob\ninherits(Glob, EE)\nfunction Glob (pattern, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = null\n  }\n\n  if (options && options.sync) {\n    if (cb)\n      throw new TypeError('callback provided to sync glob')\n    return new GlobSync(pattern, options)\n  }\n\n  if (!(this instanceof Glob))\n    return new Glob(pattern, options, cb)\n\n  setopts(this, pattern, options)\n  this._didRealPath = false\n\n  // process each pattern in the minimatch set\n  var n = this.minimatch.set.length\n\n  // The matches are stored as {<filename>: true,...} so that\n  // duplicates are automagically pruned.\n  // Later, we do an Object.keys() on these.\n  // Keep them as a list so we can fill in when nonull is set.\n  this.matches = new Array(n)\n\n  if (typeof cb === 'function') {\n    cb = once(cb)\n    this.on('error', cb)\n    this.on('end', function (matches) {\n      cb(null, matches)\n    })\n  }\n\n  var self = this\n  this._processing = 0\n\n  this._emitQueue = []\n  this._processQueue = []\n  this.paused = false\n\n  if (this.noprocess)\n    return this\n\n  if (n === 0)\n    return done()\n\n  var sync = true\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false, done)\n  }\n  sync = false\n\n  function done () {\n    --self._processing\n    if (self._processing <= 0) {\n      if (sync) {\n        process.nextTick(function () {\n          self._finish()\n        })\n      } else {\n        self._finish()\n      }\n    }\n  }\n}\n\nGlob.prototype._finish = function () {\n  assert(this instanceof Glob)\n  if (this.aborted)\n    return\n\n  if (this.realpath && !this._didRealpath)\n    return this._realpath()\n\n  common.finish(this)\n  this.emit('end', this.found)\n}\n\nGlob.prototype._realpath = function () {\n  if (this._didRealpath)\n    return\n\n  this._didRealpath = true\n\n  var n = this.matches.length\n  if (n === 0)\n    return this._finish()\n\n  var self = this\n  for (var i = 0; i < this.matches.length; i++)\n    this._realpathSet(i, next)\n\n  function next () {\n    if (--n === 0)\n      self._finish()\n  }\n}\n\nGlob.prototype._realpathSet = function (index, cb) {\n  var matchset = this.matches[index]\n  if (!matchset)\n    return cb()\n\n  var found = Object.keys(matchset)\n  var self = this\n  var n = found.length\n\n  if (n === 0)\n    return cb()\n\n  var set = this.matches[index] = Object.create(null)\n  found.forEach(function (p, i) {\n    // If there's a problem with the stat, then it means that\n    // one or more of the links in the realpath couldn't be\n    // resolved.  just return the abs value in that case.\n    p = self._makeAbs(p)\n    rp.realpath(p, self.realpathCache, function (er, real) {\n      if (!er)\n        set[real] = true\n      else if (er.syscall === 'stat')\n        set[p] = true\n      else\n        self.emit('error', er) // srsly wtf right here\n\n      if (--n === 0) {\n        self.matches[index] = set\n        cb()\n      }\n    })\n  })\n}\n\nGlob.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlob.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n\nGlob.prototype.abort = function () {\n  this.aborted = true\n  this.emit('abort')\n}\n\nGlob.prototype.pause = function () {\n  if (!this.paused) {\n    this.paused = true\n    this.emit('pause')\n  }\n}\n\nGlob.prototype.resume = function () {\n  if (this.paused) {\n    this.emit('resume')\n    this.paused = false\n    if (this._emitQueue.length) {\n      var eq = this._emitQueue.slice(0)\n      this._emitQueue.length = 0\n      for (var i = 0; i < eq.length; i ++) {\n        var e = eq[i]\n        this._emitMatch(e[0], e[1])\n      }\n    }\n    if (this._processQueue.length) {\n      var pq = this._processQueue.slice(0)\n      this._processQueue.length = 0\n      for (var i = 0; i < pq.length; i ++) {\n        var p = pq[i]\n        this._processing--\n        this._process(p[0], p[1], p[2], p[3])\n      }\n    }\n  }\n}\n\nGlob.prototype._process = function (pattern, index, inGlobStar, cb) {\n  assert(this instanceof Glob)\n  assert(typeof cb === 'function')\n\n  if (this.aborted)\n    return\n\n  this._processing++\n  if (this.paused) {\n    this._processQueue.push([pattern, index, inGlobStar, cb])\n    return\n  }\n\n  //console.error('PROCESS %d', this._processing, pattern)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // see if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index, cb)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip _processing\n  if (childrenIgnored(this, read))\n    return cb()\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar, cb)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar, cb)\n}\n\nGlob.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    return self._processReaddir2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\nGlob.prototype._processReaddir2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return cb()\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  //console.error('prd2', prefix, entries, remain[0]._glob, matchedEntries)\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return cb()\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return cb()\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix) {\n      if (prefix !== '/')\n        e = prefix + '/' + e\n      else\n        e = prefix + e\n    }\n    this._process([e].concat(remain), index, inGlobStar, cb)\n  }\n  cb()\n}\n\nGlob.prototype._emitMatch = function (index, e) {\n  if (this.aborted)\n    return\n\n  if (isIgnored(this, e))\n    return\n\n  if (this.paused) {\n    this._emitQueue.push([index, e])\n    return\n  }\n\n  var abs = isAbsolute(e) ? e : this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute)\n    e = abs\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  var st = this.statCache[abs]\n  if (st)\n    this.emit('stat', e, st)\n\n  this.emit('match', e)\n}\n\nGlob.prototype._readdirInGlobStar = function (abs, cb) {\n  if (this.aborted)\n    return\n\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false, cb)\n\n  var lstatkey = 'lstat\\0' + abs\n  var self = this\n  var lstatcb = inflight(lstatkey, lstatcb_)\n\n  if (lstatcb)\n    fs.lstat(abs, lstatcb)\n\n  function lstatcb_ (er, lstat) {\n    if (er && er.code === 'ENOENT')\n      return cb()\n\n    var isSym = lstat && lstat.isSymbolicLink()\n    self.symlinks[abs] = isSym\n\n    // If it's not a symlink or a dir, then it's definitely a regular file.\n    // don't bother doing a readdir in that case.\n    if (!isSym && lstat && !lstat.isDirectory()) {\n      self.cache[abs] = 'FILE'\n      cb()\n    } else\n      self._readdir(abs, false, cb)\n  }\n}\n\nGlob.prototype._readdir = function (abs, inGlobStar, cb) {\n  if (this.aborted)\n    return\n\n  cb = inflight('readdir\\0'+abs+'\\0'+inGlobStar, cb)\n  if (!cb)\n    return\n\n  //console.error('RD %j %j', +inGlobStar, abs)\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs, cb)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return cb()\n\n    if (Array.isArray(c))\n      return cb(null, c)\n  }\n\n  var self = this\n  fs.readdir(abs, readdirCb(this, abs, cb))\n}\n\nfunction readdirCb (self, abs, cb) {\n  return function (er, entries) {\n    if (er)\n      self._readdirError(abs, er, cb)\n    else\n      self._readdirEntries(abs, entries, cb)\n  }\n}\n\nGlob.prototype._readdirEntries = function (abs, entries, cb) {\n  if (this.aborted)\n    return\n\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n  return cb(null, entries)\n}\n\nGlob.prototype._readdirError = function (f, er, cb) {\n  if (this.aborted)\n    return\n\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        this.emit('error', error)\n        this.abort()\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict) {\n        this.emit('error', er)\n        // If the error is handled, then we abort\n        // if not, we threw out of here\n        this.abort()\n      }\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n\n  return cb()\n}\n\nGlob.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar, cb) {\n  var self = this\n  this._readdir(abs, inGlobStar, function (er, entries) {\n    self._processGlobStar2(prefix, read, abs, remain, index, inGlobStar, entries, cb)\n  })\n}\n\n\nGlob.prototype._processGlobStar2 = function (prefix, read, abs, remain, index, inGlobStar, entries, cb) {\n  //console.error('pgs2', prefix, remain[0], entries)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return cb()\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false, cb)\n\n  var isSym = this.symlinks[abs]\n  var len = entries.length\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return cb()\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true, cb)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true, cb)\n  }\n\n  cb()\n}\n\nGlob.prototype._processSimple = function (prefix, index, cb) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var self = this\n  this._stat(prefix, function (er, exists) {\n    self._processSimple2(prefix, index, er, exists, cb)\n  })\n}\nGlob.prototype._processSimple2 = function (prefix, index, er, exists, cb) {\n\n  //console.error('ps2', prefix, exists)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return cb()\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n  cb()\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlob.prototype._stat = function (f, cb) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return cb()\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return cb(null, c)\n\n    if (needDir && c === 'FILE')\n      return cb()\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (stat !== undefined) {\n    if (stat === false)\n      return cb(null, stat)\n    else {\n      var type = stat.isDirectory() ? 'DIR' : 'FILE'\n      if (needDir && type === 'FILE')\n        return cb()\n      else\n        return cb(null, type, stat)\n    }\n  }\n\n  var self = this\n  var statcb = inflight('stat\\0' + abs, lstatcb_)\n  if (statcb)\n    fs.lstat(abs, statcb)\n\n  function lstatcb_ (er, lstat) {\n    if (lstat && lstat.isSymbolicLink()) {\n      // If it's a symlink, then treat it as the target, unless\n      // the target does not exist, then treat it as a file.\n      return fs.stat(abs, function (er, stat) {\n        if (er)\n          self._stat2(f, abs, null, lstat, cb)\n        else\n          self._stat2(f, abs, er, stat, cb)\n      })\n    } else {\n      self._stat2(f, abs, er, lstat, cb)\n    }\n  }\n}\n\nGlob.prototype._stat2 = function (f, abs, er, stat, cb) {\n  if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n    this.statCache[abs] = false\n    return cb()\n  }\n\n  var needDir = f.slice(-1) === '/'\n  this.statCache[abs] = stat\n\n  if (abs.slice(-1) === '/' && stat && !stat.isDirectory())\n    return cb(null, false, stat)\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return cb()\n\n  return cb(null, c, stat)\n}\n","module.exports = realpath\nrealpath.realpath = realpath\nrealpath.sync = realpathSync\nrealpath.realpathSync = realpathSync\nrealpath.monkeypatch = monkeypatch\nrealpath.unmonkeypatch = unmonkeypatch\n\nvar fs = require('fs')\nvar origRealpath = fs.realpath\nvar origRealpathSync = fs.realpathSync\n\nvar version = process.version\nvar ok = /^v[0-5]\\./.test(version)\nvar old = require('./old.js')\n\nfunction newError (er) {\n  return er && er.syscall === 'realpath' && (\n    er.code === 'ELOOP' ||\n    er.code === 'ENOMEM' ||\n    er.code === 'ENAMETOOLONG'\n  )\n}\n\nfunction realpath (p, cache, cb) {\n  if (ok) {\n    return origRealpath(p, cache, cb)\n  }\n\n  if (typeof cache === 'function') {\n    cb = cache\n    cache = null\n  }\n  origRealpath(p, cache, function (er, result) {\n    if (newError(er)) {\n      old.realpath(p, cache, cb)\n    } else {\n      cb(er, result)\n    }\n  })\n}\n\nfunction realpathSync (p, cache) {\n  if (ok) {\n    return origRealpathSync(p, cache)\n  }\n\n  try {\n    return origRealpathSync(p, cache)\n  } catch (er) {\n    if (newError(er)) {\n      return old.realpathSync(p, cache)\n    } else {\n      throw er\n    }\n  }\n}\n\nfunction monkeypatch () {\n  fs.realpath = realpath\n  fs.realpathSync = realpathSync\n}\n\nfunction unmonkeypatch () {\n  fs.realpath = origRealpath\n  fs.realpathSync = origRealpathSync\n}\n","module.exports = require(\"assert\");","exports.alphasort = alphasort\nexports.alphasorti = alphasorti\nexports.setopts = setopts\nexports.ownProp = ownProp\nexports.makeAbs = makeAbs\nexports.finish = finish\nexports.mark = mark\nexports.isIgnored = isIgnored\nexports.childrenIgnored = childrenIgnored\n\nfunction ownProp (obj, field) {\n  return Object.prototype.hasOwnProperty.call(obj, field)\n}\n\nvar path = require(\"path\")\nvar minimatch = require(\"minimatch\")\nvar isAbsolute = require(\"path-is-absolute\")\nvar Minimatch = minimatch.Minimatch\n\nfunction alphasorti (a, b) {\n  return a.toLowerCase().localeCompare(b.toLowerCase())\n}\n\nfunction alphasort (a, b) {\n  return a.localeCompare(b)\n}\n\nfunction setupIgnores (self, options) {\n  self.ignore = options.ignore || []\n\n  if (!Array.isArray(self.ignore))\n    self.ignore = [self.ignore]\n\n  if (self.ignore.length) {\n    self.ignore = self.ignore.map(ignoreMap)\n  }\n}\n\n// ignore patterns are always in dot:true mode.\nfunction ignoreMap (pattern) {\n  var gmatcher = null\n  if (pattern.slice(-3) === '/**') {\n    var gpattern = pattern.replace(/(\\/\\*\\*)+$/, '')\n    gmatcher = new Minimatch(gpattern, { dot: true })\n  }\n\n  return {\n    matcher: new Minimatch(pattern, { dot: true }),\n    gmatcher: gmatcher\n  }\n}\n\nfunction setopts (self, pattern, options) {\n  if (!options)\n    options = {}\n\n  // base-matching: just use globstar for that.\n  if (options.matchBase && -1 === pattern.indexOf(\"/\")) {\n    if (options.noglobstar) {\n      throw new Error(\"base matching requires globstar\")\n    }\n    pattern = \"**/\" + pattern\n  }\n\n  self.silent = !!options.silent\n  self.pattern = pattern\n  self.strict = options.strict !== false\n  self.realpath = !!options.realpath\n  self.realpathCache = options.realpathCache || Object.create(null)\n  self.follow = !!options.follow\n  self.dot = !!options.dot\n  self.mark = !!options.mark\n  self.nodir = !!options.nodir\n  if (self.nodir)\n    self.mark = true\n  self.sync = !!options.sync\n  self.nounique = !!options.nounique\n  self.nonull = !!options.nonull\n  self.nosort = !!options.nosort\n  self.nocase = !!options.nocase\n  self.stat = !!options.stat\n  self.noprocess = !!options.noprocess\n  self.absolute = !!options.absolute\n\n  self.maxLength = options.maxLength || Infinity\n  self.cache = options.cache || Object.create(null)\n  self.statCache = options.statCache || Object.create(null)\n  self.symlinks = options.symlinks || Object.create(null)\n\n  setupIgnores(self, options)\n\n  self.changedCwd = false\n  var cwd = process.cwd()\n  if (!ownProp(options, \"cwd\"))\n    self.cwd = cwd\n  else {\n    self.cwd = path.resolve(options.cwd)\n    self.changedCwd = self.cwd !== cwd\n  }\n\n  self.root = options.root || path.resolve(self.cwd, \"/\")\n  self.root = path.resolve(self.root)\n  if (process.platform === \"win32\")\n    self.root = self.root.replace(/\\\\/g, \"/\")\n\n  // TODO: is an absolute `cwd` supposed to be resolved against `root`?\n  // e.g. { cwd: '/test', root: __dirname } === path.join(__dirname, '/test')\n  self.cwdAbs = isAbsolute(self.cwd) ? self.cwd : makeAbs(self, self.cwd)\n  if (process.platform === \"win32\")\n    self.cwdAbs = self.cwdAbs.replace(/\\\\/g, \"/\")\n  self.nomount = !!options.nomount\n\n  // disable comments and negation in Minimatch.\n  // Note that they are not supported in Glob itself anyway.\n  options.nonegate = true\n  options.nocomment = true\n\n  self.minimatch = new Minimatch(pattern, options)\n  self.options = self.minimatch.options\n}\n\nfunction finish (self) {\n  var nou = self.nounique\n  var all = nou ? [] : Object.create(null)\n\n  for (var i = 0, l = self.matches.length; i < l; i ++) {\n    var matches = self.matches[i]\n    if (!matches || Object.keys(matches).length === 0) {\n      if (self.nonull) {\n        // do like the shell, and spit out the literal glob\n        var literal = self.minimatch.globSet[i]\n        if (nou)\n          all.push(literal)\n        else\n          all[literal] = true\n      }\n    } else {\n      // had matches\n      var m = Object.keys(matches)\n      if (nou)\n        all.push.apply(all, m)\n      else\n        m.forEach(function (m) {\n          all[m] = true\n        })\n    }\n  }\n\n  if (!nou)\n    all = Object.keys(all)\n\n  if (!self.nosort)\n    all = all.sort(self.nocase ? alphasorti : alphasort)\n\n  // at *some* point we statted all of these\n  if (self.mark) {\n    for (var i = 0; i < all.length; i++) {\n      all[i] = self._mark(all[i])\n    }\n    if (self.nodir) {\n      all = all.filter(function (e) {\n        var notDir = !(/\\/$/.test(e))\n        var c = self.cache[e] || self.cache[makeAbs(self, e)]\n        if (notDir && c)\n          notDir = c !== 'DIR' && !Array.isArray(c)\n        return notDir\n      })\n    }\n  }\n\n  if (self.ignore.length)\n    all = all.filter(function(m) {\n      return !isIgnored(self, m)\n    })\n\n  self.found = all\n}\n\nfunction mark (self, p) {\n  var abs = makeAbs(self, p)\n  var c = self.cache[abs]\n  var m = p\n  if (c) {\n    var isDir = c === 'DIR' || Array.isArray(c)\n    var slash = p.slice(-1) === '/'\n\n    if (isDir && !slash)\n      m += '/'\n    else if (!isDir && slash)\n      m = m.slice(0, -1)\n\n    if (m !== p) {\n      var mabs = makeAbs(self, m)\n      self.statCache[mabs] = self.statCache[abs]\n      self.cache[mabs] = self.cache[abs]\n    }\n  }\n\n  return m\n}\n\n// lotta situps...\nfunction makeAbs (self, f) {\n  var abs = f\n  if (f.charAt(0) === '/') {\n    abs = path.join(self.root, f)\n  } else if (isAbsolute(f) || f === '') {\n    abs = f\n  } else if (self.changedCwd) {\n    abs = path.resolve(self.cwd, f)\n  } else {\n    abs = path.resolve(f)\n  }\n\n  if (process.platform === 'win32')\n    abs = abs.replace(/\\\\/g, '/')\n\n  return abs\n}\n\n\n// Return true, if pattern ends with globstar '**', for the accompanying parent directory.\n// Ex:- If node_modules/** is the pattern, add 'node_modules' to ignore list along with it's contents\nfunction isIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return item.matcher.match(path) || !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n\nfunction childrenIgnored (self, path) {\n  if (!self.ignore.length)\n    return false\n\n  return self.ignore.some(function(item) {\n    return !!(item.gmatcher && item.gmatcher.match(path))\n  })\n}\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","/**\n * Copyright 2019 Red Hat, Inc. and others.\n\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n *     http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as requirements from './languageServer/requirements';\n\nimport { MicroProfileLS } from './definitions/constants';\nimport { DidChangeConfigurationNotification, LanguageClientOptions, LanguageClient, DocumentSelector } from 'vscode-languageclient';\nimport { ExtensionContext, commands, window, workspace, extensions } from 'vscode';\nimport { prepareExecutable } from './languageServer/javaServerStarter';\nimport { registerConfigurationUpdateCommand, registerOpenURICommand, CommandKind } from './lsp-commands';\nimport { registerYamlSchemaSupport, MicroProfilePropertiesChangeEvent } from './yaml/YamlSchema';\nimport { collectMicroProfileJavaExtensions, handleExtensionChange, MicroProfileContribution } from './languageServer/plugin';\nimport { waitForStandardMode } from './util/javaServerMode';\n\nlet languageClient: LanguageClient;\n\nexport async function activate(context: ExtensionContext) {\n\n  /**\n   * Register Yaml Schema support to manage application.yaml\n   */\n  const yamlSchemaCache = registerYamlSchemaSupport();\n\n  /**\n   * Waits for the java language server to launch in standard mode\n   * Before activating Tools for MicroProfile.\n   * If java ls was started in lightweight mode, It will prompt user to switch\n   */\n  await waitForStandardMode();\n\n  connectToLS(context).then(() => {\n    yamlSchemaCache.then(cache => { if (cache) { cache.languageClient = languageClient; } });\n\n    /**\n     * Delegate requests from MicroProfile LS to the Java JDT LS\n     */\n    bindRequest(MicroProfileLS.PROJECT_INFO_REQUEST);\n    bindRequest(MicroProfileLS.PROPERTY_DEFINITION_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_CODEACTION_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_CODELENS_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_COMPLETION_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_DIAGNOSTICS_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_HOVER_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_FILE_INFO_REQUEST);\n    bindRequest(MicroProfileLS.JAVA_PROJECT_LABELS_REQUEST);\n\n    /**\n     * Delegate notifications from Java JDT LS to the MicroProfile LS\n     */\n    context.subscriptions.push(commands.registerCommand(MicroProfileLS.PROPERTIES_CHANGED_NOTIFICATION, (event: MicroProfilePropertiesChangeEvent) => {\n      languageClient.sendNotification(MicroProfileLS.PROPERTIES_CHANGED_NOTIFICATION, event);\n      yamlSchemaCache.then(cache => { if (cache) cache.evict(event); });\n    }));\n  }).catch((error) => {\n    window.showErrorMessage(error.message, error.label).then((selection) => {\n      if (error.label && error.label === selection && error.openUrl) {\n        commands.executeCommand('vscode.open', error.openUrl);\n      }\n    });\n  });\n\n  function bindRequest(request: string) {\n    languageClient.onRequest(request, async (params: any) =>\n      <any>await commands.executeCommand(\"java.execute.workspaceCommand\", request, params)\n    );\n  }\n\n  registerVSCodeCommands(context);\n}\n\nexport function deactivate() {\n  // language client may not have been started\n  // if java language server was never launched in standard mode.\n  if (languageClient) {\n    languageClient.stop();\n  }\n}\n\nfunction registerVSCodeCommands(context: ExtensionContext) {\n  /**\n   * Register standard LSP commands\n   */\n  context.subscriptions.push(registerConfigurationUpdateCommand());\n  context.subscriptions.push(registerOpenURICommand());\n}\n\nfunction connectToLS(context: ExtensionContext) {\n  const microprofileContributions: MicroProfileContribution[] = collectMicroProfileJavaExtensions(extensions.all);\n  return requirements.resolveRequirements().then(requirements => {\n    const clientOptions: LanguageClientOptions = {\n      documentSelector: getDocumentSelector(microprofileContributions),\n      // wrap with key 'settings' so it can be handled same a DidChangeConfiguration\n      initializationOptions: {\n        settings: getVSCodeMicroProfileSettings(),\n        extendedClientCapabilities: {\n          commands: {\n            commandsKind: {\n              valueSet: [\n                CommandKind.COMMAND_CONFIGURATION_UPDATE,\n                CommandKind.COMMAND_OPEN_URI\n              ]\n            }\n          }\n        }\n      },\n      synchronize: {\n        // preferences starting with these will trigger didChangeConfiguration\n        configurationSection: ['microprofile', '[microprofile]']\n      },\n      middleware: {\n        workspace: {\n          didChangeConfiguration: () => {\n            languageClient.sendNotification(DidChangeConfigurationNotification.type, { settings: getVSCodeMicroProfileSettings() });\n          }\n        }\n      }\n    };\n\n    const serverOptions = prepareExecutable(requirements, getMicroProfileJarExtensions(microprofileContributions));\n\n    languageClient = new LanguageClient('microprofile.tools', 'Tools for MicroProfile', serverOptions, clientOptions);\n    context.subscriptions.push(languageClient.start());\n\n    if (extensions.onDidChange) {// Theia doesn't support this API yet\n      context.subscriptions.push(extensions.onDidChange(() => {\n        // if extensions that contribute mp java extensions change we need to reload the window\n        handleExtensionChange(extensions.all);\n      }));\n    }\n\n    return languageClient.onReady();\n  });\n\n  /**\n   * Returns the document selector.\n   *\n   * The returned document selector contains the microprofile-properties and java document selectors\n   * and all document selectors contained in `microProfileContributions`.\n   *\n   * @param microProfileContributions MicroProfile language server contributions from other VS Code extensions\n   */\n  function getDocumentSelector(microProfileContributions: MicroProfileContribution[]): DocumentSelector {\n    let documentSelector: DocumentSelector = [\n      { scheme: 'file', language: 'microprofile-properties' },\n      { scheme: 'file', language: 'java' }\n    ];\n    microProfileContributions.forEach((contribution: MicroProfileContribution) => {\n      documentSelector = documentSelector.concat(contribution.documentSelector);\n    });\n    return documentSelector;\n  }\n\n  /**\n   * Returns a json object with key 'microprofile' and a json object value that\n   * holds all microprofile settings.\n   */\n  function getVSCodeMicroProfileSettings(): { microprofile: any } {\n    const defaultMicroProfileSettings = {};\n    const configMicroProfile = workspace.getConfiguration().get('microprofile');\n    const microprofileSettings = configMicroProfile ? configMicroProfile : defaultMicroProfileSettings;\n\n    return {\n      microprofile: microprofileSettings,\n    };\n  }\n\n  /**\n   * Returns an array of paths to MicroProfileLS extension jars within `microProfileContributions`\n   *\n   * @param microProfileContributions MicroProfile language server contributions from other VS Code extensions\n   */\n  function getMicroProfileJarExtensions(microProfileContributions: MicroProfileContribution[]): string[] {\n    let jarPaths: string[] = [];\n    microProfileContributions.forEach((contribution: MicroProfileContribution) => {\n      if (contribution.jarExtensions && contribution.jarExtensions.length > 0) {\n        jarPaths = jarPaths.concat(contribution.jarExtensions);\n      }\n    });\n    return jarPaths;\n  }\n}\n","'use strict';\n\nimport * as cp from 'child_process';\nimport * as fs from 'fs';\nimport * as path from 'path';\nimport { Uri, workspace, env } from 'vscode';\n\nconst expandHomeDir = require('expand-home-dir');\nconst findJavaHome = require('find-java-home');\nconst isWindows = process.platform.indexOf('win') === 0;\nconst JAVA_FILENAME = 'java' + (isWindows?'.exe': '');\n\nexport interface RequirementsData {\n    java_home: string;\n    java_version: number;\n}\n\n/**\n * Resolves the requirements needed to run the extension.\n * Returns a promise that will resolve to a RequirementsData if\n * all requirements are resolved, it will reject with ErrorData if\n * if any of the requirements fails to resolve.\n *\n */\nexport async function resolveRequirements(): Promise<RequirementsData> {\n    const javaHome = await checkJavaRuntime();\n    const javaVersion = await checkJavaVersion(javaHome);\n    return Promise.resolve({ java_home: javaHome, java_version: javaVersion});\n}\n\nfunction checkJavaRuntime(): Promise<string> {\n    return new Promise((resolve, reject) => {\n        let source: string;\n        let javaHome: string|undefined = readJavaHomeConfig();\n\n        if (javaHome) {\n            source = 'The java.home variable defined in VS Code settings';\n        } else {\n            javaHome = process.env['JDK_HOME'];\n            if (javaHome) {\n                source = 'The JDK_HOME environment variable';\n            } else {\n                javaHome = process.env['JAVA_HOME'];\n                source = 'The JAVA_HOME environment variable';\n            }\n        }\n\n        if (javaHome) {\n            javaHome = expandHomeDir(javaHome);\n            if (!fs.existsSync(javaHome)) {\n                openJDKDownload(reject, source+' points to a missing folder');\n            } else if (!fs.existsSync(path.resolve(javaHome as string, 'bin', JAVA_FILENAME))) {\n                openJDKDownload(reject, source+ ' does not point to a Java runtime.');\n            }\n            return resolve(javaHome);\n        }\n        // No settings, let's try to detect as last resort.\n        findJavaHome({ allowJre: true }, (err: any, home: any) => {\n            if (err) {\n                openJDKDownload(reject, 'Java runtime could not be located.');\n            }\n            else {\n                resolve(home);\n            }\n        });\n    });\n}\n\nfunction readJavaHomeConfig(): string|undefined {\n    const config = workspace.getConfiguration();\n    return config.get<string>('java.home');\n}\n\nfunction checkJavaVersion(javaHome: string): Promise<number> {\n    return new Promise((resolve, reject) => {\n        cp.execFile(javaHome + '/bin/java', ['-version'], {}, (error, stdout, stderr) => {\n            const javaVersion = parseMajorVersion(stderr);\n            if (javaVersion < 11) {\n                openJDKDownload(reject, `Java 11 or more recent is required to run 'Tools for MicroProfile'. Please download and install a recent JDK.`);\n            } else {\n                resolve(javaVersion);\n            }\n        });\n    });\n}\n\nexport function parseMajorVersion(content: string): number {\n    let regexp = /version \"(.*)\"/g;\n    let match = regexp.exec(content);\n    if (!match) {\n        return 0;\n    }\n    let version = match[1];\n    // Ignore '1.' prefix for legacy Java versions\n    if (version.startsWith('1.')) {\n        version = version.substring(2);\n    }\n\n    // look into the interesting bits now\n    regexp = /\\d+/g;\n    match = regexp.exec(version);\n    let javaVersion = 0;\n    if (match) {\n        javaVersion = parseInt(match[0]);\n    }\n    return javaVersion;\n}\n\nfunction openJDKDownload(reject: any, cause: string) {\n    let jdkUrl = 'https://developers.redhat.com/products/openjdk/download/?sc_cid=701f2000000RWTnAAO';\n    if (process.platform === 'darwin') {\n        jdkUrl = 'http://www.oracle.com/technetwork/java/javase/downloads/index.html';\n    }\n    reject({\n        message: cause,\n        label: 'Get the Java Development Kit',\n        openUrl: Uri.parse(jdkUrl),\n        replaceClose: false\n    });\n}\n","var join = require(\"path\").join;\nvar homedir = process.env[(process.platform == 'win32') ? 'USERPROFILE' : 'HOME'];\n\nmodule.exports = expandHomeDir;\n\nfunction expandHomeDir (path) {\n  if (!path) return path;\n  if (path == '~') return homedir;\n  if (path.slice(0, 2) != '~/') return path;\n  return join(homedir, path.slice(2));\n}\n","\"use strict\";\n/* Copyright 2013 Joseph Spencer.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar fs = __importStar(require(\"fs\"));\nvar path = __importStar(require(\"path\"));\nvar cp = __importStar(require(\"child_process\"));\nvar which_1 = __importDefault(require(\"which\"));\nvar winreg_1 = __importDefault(require(\"winreg\"));\nvar isWindows = process.platform.indexOf('win') === 0;\nvar jdkRegistryKeyPaths = [\n    \"\\\\SOFTWARE\\\\JavaSoft\\\\JDK\",\n    \"\\\\SOFTWARE\\\\JavaSoft\\\\Java Development Kit\"\n];\nvar jreRegistryKeyPaths = [\n    \"\\\\SOFTWARE\\\\JavaSoft\\\\Java Runtime Environment\"\n];\n;\nfunction findJavaHome(optionsOrCb, optional) {\n    return __awaiter(this, void 0, void 0, function () {\n        var cb, options, res, err, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!optional) {\n                        cb = optionsOrCb;\n                        options = undefined;\n                    }\n                    else {\n                        options = optionsOrCb;\n                        cb = optional;\n                    }\n                    res = undefined;\n                    err = null;\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, findJavaHomePromise(options)];\n                case 2:\n                    res = _a.sent();\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    err = error_1;\n                    return [3 /*break*/, 4];\n                case 4:\n                    cb(err, res);\n                    return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction findJavaHomePromise(options) {\n    return __awaiter(this, void 0, void 0, function () {\n        var allowJre, JAVA_FILENAME, possibleKeyPaths, javaHome;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    allowJre = !!(options && options.allowJre);\n                    JAVA_FILENAME = (allowJre ? 'java' : 'javac') + (isWindows ? '.exe' : '');\n                    // From env\n                    if (process.env.JAVA_HOME && dirIsJavaHome(process.env.JAVA_HOME, JAVA_FILENAME)) {\n                        return [2 /*return*/, process.env.JAVA_HOME];\n                    }\n                    if (!isWindows) return [3 /*break*/, 2];\n                    possibleKeyPaths = allowJre ? jdkRegistryKeyPaths.concat(jreRegistryKeyPaths) : jdkRegistryKeyPaths;\n                    return [4 /*yield*/, findInRegistry(possibleKeyPaths)];\n                case 1:\n                    javaHome = _a.sent();\n                    if (javaHome) {\n                        return [2 /*return*/, javaHome];\n                    }\n                    _a.label = 2;\n                case 2: return [4 /*yield*/, findInPath(JAVA_FILENAME)];\n                case 3: \n                // From PATH\n                return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\nfunction findInPath(JAVA_FILENAME) {\n    return new Promise(function (resolve) {\n        which_1.default(JAVA_FILENAME, function (err, proposed) {\n            if (err || !proposed) {\n                return resolve(null);\n            }\n            //resolve symlinks\n            proposed = findLinkedFile(proposed);\n            //get the /bin directory\n            proposed = path.dirname(proposed);\n            //on mac, java install has a utility script called java_home that does the\n            //dirty work for us\n            var macUtility = path.resolve(proposed, 'java_home');\n            if (fs.existsSync(macUtility)) {\n                var buffer = void 0;\n                try {\n                    buffer = cp.execSync(macUtility, { cwd: proposed });\n                    var javaHome = '' + buffer.toString().replace(/\\n$/, '');\n                    return resolve(javaHome);\n                }\n                catch (error) {\n                    return resolve(null);\n                }\n            }\n            //up one from /bin\n            resolve(path.dirname(proposed));\n        });\n    });\n}\nfunction findInRegistry(keyPaths) {\n    return __awaiter(this, void 0, void 0, function () {\n        var promises, keysFoundSegments, keysFound, sortedKeysFound, _i, sortedKeysFound_1, key, res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!keyPaths.length)\n                        return [2 /*return*/, null];\n                    promises = keyPaths.map(promisifyFindPossibleRegKey);\n                    return [4 /*yield*/, Promise.all(promises)];\n                case 1:\n                    keysFoundSegments = _a.sent();\n                    keysFound = Array.prototype.concat.apply([], keysFoundSegments);\n                    if (!keysFound.length)\n                        return [2 /*return*/, null];\n                    sortedKeysFound = keysFound.sort(function (a, b) {\n                        var aVer = parseFloat(a.key);\n                        var bVer = parseFloat(b.key);\n                        return bVer - aVer;\n                    });\n                    _i = 0, sortedKeysFound_1 = sortedKeysFound;\n                    _a.label = 2;\n                case 2:\n                    if (!(_i < sortedKeysFound_1.length)) return [3 /*break*/, 5];\n                    key = sortedKeysFound_1[_i];\n                    return [4 /*yield*/, promisifyFindJavaHomeInRegKey(key)];\n                case 3:\n                    res = _a.sent();\n                    if (res) {\n                        return [2 /*return*/, res];\n                    }\n                    _a.label = 4;\n                case 4:\n                    _i++;\n                    return [3 /*break*/, 2];\n                case 5: return [2 /*return*/, null];\n            }\n        });\n    });\n}\nfunction promisifyFindPossibleRegKey(keyPath) {\n    return new Promise(function (resolve) {\n        var winreg = new winreg_1.default({\n            hive: winreg_1.default.HKLM,\n            key: keyPath\n        });\n        winreg.keys(function (err, result) {\n            if (err) {\n                return resolve([]);\n            }\n            resolve(result);\n        });\n    });\n}\nfunction promisifyFindJavaHomeInRegKey(reg) {\n    return new Promise(function (resolve) {\n        reg.get('JavaHome', function (err, home) {\n            if (err || !home) {\n                return resolve(null);\n            }\n            resolve(home.value);\n        });\n    });\n}\nfunction dirIsJavaHome(dir, javaFilename) {\n    return fs.existsSync('' + dir)\n        && fs.statSync(dir).isDirectory()\n        && fs.existsSync(path.resolve(dir, 'bin', javaFilename));\n}\n// iterate through symbolic links until\n// file is found\nfunction findLinkedFile(file) {\n    if (!fs.lstatSync(file).isSymbolicLink())\n        return file;\n    return findLinkedFile(fs.readlinkSync(file));\n}\nmodule.exports = findJavaHome;\n//# sourceMappingURL=index.js.map","module.exports = which\nwhich.sync = whichSync\n\nvar path = require(\"path\")\n  , fs\n  , COLON = process.platform === \"win32\" ? \";\" : \":\"\n  , isExe\n  , fs = require(\"fs\")\n\nif (process.platform == \"win32\") {\n  // On windows, there is no good way to check that a file is executable\n  isExe = function isExe () { return true }\n} else {\n  isExe = function isExe (mod, uid, gid) {\n    //console.error(mod, uid, gid);\n    //console.error(\"isExe?\", (mod & 0111).toString(8))\n    var ret = (mod & 0001)\n        || (mod & 0010) && process.getgid && gid === process.getgid()\n        || (mod & 0010) && process.getuid && 0   === process.getuid()\n        || (mod & 0100) && process.getuid && uid === process.getuid()\n        || (mod & 0100) && process.getuid && 0   === process.getuid()\n    //console.error(\"isExe?\", ret)\n    return ret\n  }\n}\n\n\n\nfunction which (cmd, cb) {\n  if (isAbsolute(cmd)) return cb(null, cmd)\n  var pathEnv = (process.env.PATH || \"\").split(COLON)\n    , pathExt = [\"\"]\n  if (process.platform === \"win32\") {\n    pathEnv.push(process.cwd())\n    pathExt = (process.env.PATHEXT || \".EXE\").split(COLON)\n    if (cmd.indexOf(\".\") !== -1) pathExt.unshift(\"\")\n  }\n  //console.error(\"pathEnv\", pathEnv)\n  ;(function F (i, l) {\n    if (i === l) return cb(new Error(\"not found: \"+cmd))\n    var p = path.resolve(pathEnv[i], cmd)\n    ;(function E (ii, ll) {\n      if (ii === ll) return F(i + 1, l)\n      var ext = pathExt[ii]\n      //console.error(p + ext)\n      fs.stat(p + ext, function (er, stat) {\n        if (!er &&\n            stat &&\n            stat.isFile() &&\n            isExe(stat.mode, stat.uid, stat.gid)) {\n          //console.error(\"yes, exe!\", p + ext)\n          return cb(null, p + ext)\n        }\n        return E(ii + 1, ll)\n      })\n    })(0, pathExt.length)\n  })(0, pathEnv.length)\n}\n\nfunction whichSync (cmd) {\n  if (isAbsolute(cmd)) return cmd\n  var pathEnv = (process.env.PATH || \"\").split(COLON)\n    , pathExt = [\"\"]\n  if (process.platform === \"win32\") {\n    pathEnv.push(process.cwd())\n    pathExt = (process.env.PATHEXT || \".EXE\").split(COLON)\n    if (cmd.indexOf(\".\") !== -1) pathExt.unshift(\"\")\n  }\n  for (var i = 0, l = pathEnv.length; i < l; i ++) {\n    var p = path.join(pathEnv[i], cmd)\n    for (var j = 0, ll = pathExt.length; j < ll; j ++) {\n      var cur = p + pathExt[j]\n      var stat\n      try { stat = fs.statSync(cur) } catch (ex) {}\n      if (stat &&\n          stat.isFile() &&\n          isExe(stat.mode, stat.uid, stat.gid)) return cur\n    }\n  }\n  throw new Error(\"not found: \"+cmd)\n}\n\nvar isAbsolute = process.platform === \"win32\" ? absWin : absUnix\n\nfunction absWin (p) {\n  if (absUnix(p)) return true\n  // pull off the device/UNC bit from a windows path.\n  // from node's lib/path.js\n  var splitDeviceRe =\n        /^([a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?([\\\\\\/])?/\n    , result = splitDeviceRe.exec(p)\n    , device = result[1] || ''\n    , isUnc = device && device.charAt(1) !== ':'\n    , isAbsolute = !!result[2] || isUnc // UNC paths are always absolute\n\n  return isAbsolute\n}\n\nfunction absUnix (p) {\n  return p.charAt(0) === \"/\" || p === \"\"\n}\n","/************************************************************************************************************\r\n * registry.js - contains a wrapper for the REG command under Windows, which provides access to the registry\r\n *\r\n * @author Paul Bottin a/k/a FrEsC\r\n *\r\n */\r\n\r\n/* imports */\r\nvar util          = require('util')\r\n,   path          = require('path')\r\n,   spawn         = require('child_process').spawn\r\n\r\n/* set to console.log for debugging */\r\n,   log           = function () {}\r\n\r\n/* registry hive ids */\r\n,   HKLM          = 'HKLM'\r\n,   HKCU          = 'HKCU'\r\n,   HKCR          = 'HKCR'\r\n,   HKU           = 'HKU'\r\n,   HKCC          = 'HKCC'\r\n,   HIVES         = [ HKLM, HKCU, HKCR, HKU, HKCC ]\r\n\r\n/* registry value type ids */\r\n,   REG_SZ        = 'REG_SZ'\r\n,   REG_MULTI_SZ  = 'REG_MULTI_SZ'\r\n,   REG_EXPAND_SZ = 'REG_EXPAND_SZ'\r\n,   REG_DWORD     = 'REG_DWORD'\r\n,   REG_QWORD     = 'REG_QWORD'\r\n,   REG_BINARY    = 'REG_BINARY'\r\n,   REG_NONE      = 'REG_NONE'\r\n,   REG_TYPES     = [ REG_SZ, REG_MULTI_SZ, REG_EXPAND_SZ, REG_DWORD, REG_QWORD, REG_BINARY, REG_NONE ]\r\n\r\n/* default registry value name */\r\n,   DEFAULT_VALUE = ''\r\n\r\n/* general key pattern */\r\n,   KEY_PATTERN   = /(\\\\[a-zA-Z0-9_\\s]+)*/\r\n\r\n/* key path pattern (as returned by REG-cli) */\r\n,   PATH_PATTERN  = /^(HKEY_LOCAL_MACHINE|HKEY_CURRENT_USER|HKEY_CLASSES_ROOT|HKEY_USERS|HKEY_CURRENT_CONFIG)(.*)$/\r\n\r\n/* registry item pattern */\r\n,   ITEM_PATTERN  = /^(.*)\\s(REG_SZ|REG_MULTI_SZ|REG_EXPAND_SZ|REG_DWORD|REG_QWORD|REG_BINARY|REG_NONE)\\s+([^\\s].*)$/\r\n\r\n/**\r\n * Creates an Error object that contains the exit code of the REG.EXE process.\r\n * This contructor is private. Objects of this type are created internally and returned in the <code>err</code> parameters in case the REG.EXE process doesn't exit cleanly.\r\n *\r\n * @private\r\n * @class\r\n *\r\n * @param {string} message - the error message\r\n * @param {number} code - the process exit code\r\n *\r\n */\r\nfunction ProcessUncleanExitError(message, code) {\r\n  if (!(this instanceof ProcessUncleanExitError))\r\n    return new ProcessUncleanExitError(message, code);\r\n\r\n  Error.captureStackTrace(this, ProcessUncleanExitError);\r\n\r\n  /**\r\n   * The error name.\r\n   * @readonly\r\n   * @member {string} ProcessUncleanExitError#name\r\n   */\r\n  this.__defineGetter__('name', function () { return ProcessUncleanExitError.name; });\r\n\r\n  /**\r\n   * The error message.\r\n   * @readonly\r\n   * @member {string} ProcessUncleanExitError#message\r\n   */\r\n  this.__defineGetter__('message', function () { return message; });\r\n\r\n  /**\r\n   * The process exit code.\r\n   * @readonly\r\n   * @member {number} ProcessUncleanExitError#code\r\n   */\r\n  this.__defineGetter__('code', function () { return code; });\r\n\r\n}\r\n\r\nutil.inherits(ProcessUncleanExitError, Error);\r\n\r\n/*\r\n * Captures stdout/stderr for a child process\r\n */\r\nfunction captureOutput(child) {\r\n  // Use a mutable data structure so we can append as we get new data and have\r\n  // the calling context see the new data\r\n  var output = {'stdout': '', 'stderr': ''};\r\n\r\n  child.stdout.on('data', function(data) { output[\"stdout\"] += data.toString(); });\r\n  child.stderr.on('data', function(data) { output[\"stderr\"] += data.toString(); });\r\n\r\n  return output;\r\n}\r\n\r\n\r\n/*\r\n * Returns an error message containing the stdout/stderr of the child process\r\n */\r\nfunction mkErrorMsg(registryCommand, code, output) {\r\n    var stdout = output['stdout'].trim();\r\n    var stderr = output['stderr'].trim();\r\n\r\n    var msg = util.format(\"%s command exited with code %d:\\n%s\\n%s\", registryCommand, code, stdout, stderr);\r\n    return new ProcessUncleanExitError(msg, code);\r\n}\r\n\r\n\r\n/*\r\n * Converts x86/x64 to 32/64\r\n */\r\nfunction convertArchString(archString) {\r\n  if (archString == 'x64') {\r\n    return '64';\r\n  } else if (archString == 'x86') {\r\n    return '32';\r\n  } else {\r\n    throw new Error('illegal architecture: ' + archString + ' (use x86 or x64)');\r\n  }\r\n}\r\n\r\n\r\n/*\r\n * Adds correct architecture to reg args\r\n */\r\nfunction pushArch(args, arch) {\r\n  if (arch) {\r\n    args.push('/reg:' + convertArchString(arch));\r\n  }\r\n}\r\n\r\n/*\r\n * Get the path to system's reg.exe. Useful when another reg.exe is added to the PATH\r\n * Implemented only for Windows\r\n */\r\nfunction getRegExePath() {\r\n    if (process.platform === 'win32') {\r\n        return path.join(process.env.windir, 'system32', 'reg.exe');\r\n    } else {\r\n        return \"REG\";\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * Creates a single registry value record.\r\n * This contructor is private. Objects of this type are created internally and returned by methods of {@link Registry} objects.\r\n *\r\n * @private\r\n * @class\r\n *\r\n * @param {string} host - the hostname\r\n * @param {string} hive - the hive id\r\n * @param {string} key - the registry key\r\n * @param {string} name - the value name\r\n * @param {string} type - the value type\r\n * @param {string} value - the value\r\n * @param {string} arch - the hive architecture ('x86' or 'x64')\r\n *\r\n */\r\nfunction RegistryItem (host, hive, key, name, type, value, arch) {\r\n\r\n  if (!(this instanceof RegistryItem))\r\n    return new RegistryItem(host, hive, key, name, type, value, arch);\r\n\r\n  /* private members */\r\n  var _host = host    // hostname\r\n  ,   _hive = hive    // registry hive\r\n  ,   _key = key      // registry key\r\n  ,   _name = name    // property name\r\n  ,   _type = type    // property type\r\n  ,   _value = value  // property value\r\n  ,   _arch = arch    // hive architecture\r\n\r\n  /* getters/setters */\r\n\r\n  /**\r\n   * The hostname.\r\n   * @readonly\r\n   * @member {string} RegistryItem#host\r\n   */\r\n  this.__defineGetter__('host', function () { return _host; });\r\n\r\n  /**\r\n   * The hive id.\r\n   * @readonly\r\n   * @member {string} RegistryItem#hive\r\n   */\r\n  this.__defineGetter__('hive', function () { return _hive; });\r\n\r\n  /**\r\n   * The registry key.\r\n   * @readonly\r\n   * @member {string} RegistryItem#key\r\n   */\r\n  this.__defineGetter__('key', function () { return _key; });\r\n\r\n  /**\r\n   * The value name.\r\n   * @readonly\r\n   * @member {string} RegistryItem#name\r\n   */\r\n  this.__defineGetter__('name', function () { return _name; });\r\n\r\n  /**\r\n   * The value type.\r\n   * @readonly\r\n   * @member {string} RegistryItem#type\r\n   */\r\n  this.__defineGetter__('type', function () { return _type; });\r\n\r\n  /**\r\n   * The value.\r\n   * @readonly\r\n   * @member {string} RegistryItem#value\r\n   */\r\n  this.__defineGetter__('value', function () { return _value; });\r\n\r\n  /**\r\n   * The hive architecture.\r\n   * @readonly\r\n   * @member {string} RegistryItem#arch\r\n   */\r\n  this.__defineGetter__('arch', function () { return _arch; });\r\n\r\n}\r\n\r\nutil.inherits(RegistryItem, Object);\r\n\r\n/**\r\n * Creates a registry object, which provides access to a single registry key.\r\n * Note: This class is returned by a call to ```require('winreg')```.\r\n *\r\n * @public\r\n * @class\r\n *\r\n * @param {object} options - the options\r\n * @param {string=} options.host - the hostname\r\n * @param {string=} options.hive - the hive id\r\n * @param {string=} options.key - the registry key\r\n * @param {string=} options.arch - the optional registry hive architecture ('x86' or 'x64'; only valid on Windows 64 Bit Operating Systems)\r\n *\r\n * @example\r\n * var Registry = require('winreg')\r\n * ,   autoStartCurrentUser = new Registry({\r\n *       hive: Registry.HKCU,\r\n *       key:  '\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run'\r\n *     });\r\n *\r\n */\r\nfunction Registry (options) {\r\n\r\n  if (!(this instanceof Registry))\r\n    return new Registry(options);\r\n\r\n  /* private members */\r\n  var _options = options || {}\r\n  ,   _host = '' + (_options.host || '')    // hostname\r\n  ,   _hive = '' + (_options.hive || HKLM)  // registry hive\r\n  ,   _key  = '' + (_options.key  || '')    // registry key\r\n  ,   _arch = _options.arch || null         // hive architecture\r\n\r\n  /* getters/setters */\r\n\r\n  /**\r\n   * The hostname.\r\n   * @readonly\r\n   * @member {string} Registry#host\r\n   */\r\n  this.__defineGetter__('host', function () { return _host; });\r\n\r\n  /**\r\n   * The hive id.\r\n   * @readonly\r\n   * @member {string} Registry#hive\r\n   */\r\n  this.__defineGetter__('hive', function () { return _hive; });\r\n\r\n  /**\r\n   * The registry key name.\r\n   * @readonly\r\n   * @member {string} Registry#key\r\n   */\r\n  this.__defineGetter__('key', function () { return _key; });\r\n\r\n  /**\r\n   * The full path to the registry key.\r\n   * @readonly\r\n   * @member {string} Registry#path\r\n   */\r\n  this.__defineGetter__('path', function () { return (_host.length == 0 ? '' : '\\\\\\\\' + _host + '\\\\') + _hive + _key; });\r\n\r\n  /**\r\n   * The registry hive architecture ('x86' or 'x64').\r\n   * @readonly\r\n   * @member {string} Registry#arch\r\n   */\r\n  this.__defineGetter__('arch', function () { return _arch; });\r\n\r\n  /**\r\n   * Creates a new {@link Registry} instance that points to the parent registry key.\r\n   * @readonly\r\n   * @member {Registry} Registry#parent\r\n   */\r\n  this.__defineGetter__('parent', function () {\r\n    var i = _key.lastIndexOf('\\\\')\r\n    return new Registry({\r\n      host: this.host,\r\n      hive: this.hive,\r\n      key:  (i == -1)?'':_key.substring(0, i),\r\n      arch: this.arch\r\n    });\r\n  });\r\n\r\n  // validate options...\r\n  if (HIVES.indexOf(_hive) == -1)\r\n    throw new Error('illegal hive specified.');\r\n\r\n  if (!KEY_PATTERN.test(_key))\r\n    throw new Error('illegal key specified.');\r\n\r\n  if (_arch && _arch != 'x64' && _arch != 'x86')\r\n    throw new Error('illegal architecture specified (use x86 or x64)');\r\n\r\n}\r\n\r\n/**\r\n * Registry hive key HKEY_LOCAL_MACHINE.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKLM = HKLM;\r\n\r\n/**\r\n * Registry hive key HKEY_CURRENT_USER.\r\n * @type {string}\r\n */\r\nRegistry.HKCU = HKCU;\r\n\r\n/**\r\n * Registry hive key HKEY_CLASSES_ROOT.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKCR = HKCR;\r\n\r\n/**\r\n * Registry hive key HKEY_USERS.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKU = HKU;\r\n\r\n/**\r\n * Registry hive key HKEY_CURRENT_CONFIG.\r\n * Note: For writing to this hive your program has to run with admin privileges.\r\n * @type {string}\r\n */\r\nRegistry.HKCC = HKCC;\r\n\r\n/**\r\n * Collection of available registry hive keys.\r\n * @type {array}\r\n */\r\nRegistry.HIVES = HIVES;\r\n\r\n/**\r\n * Registry value type STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_SZ = REG_SZ;\r\n\r\n/**\r\n * Registry value type MULTILINE_STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_MULTI_SZ = REG_MULTI_SZ;\r\n\r\n/**\r\n * Registry value type EXPANDABLE_STRING.\r\n * @type {string}\r\n */\r\nRegistry.REG_EXPAND_SZ = REG_EXPAND_SZ;\r\n\r\n/**\r\n * Registry value type DOUBLE_WORD.\r\n * @type {string}\r\n */\r\nRegistry.REG_DWORD = REG_DWORD;\r\n\r\n/**\r\n * Registry value type QUAD_WORD.\r\n * @type {string}\r\n */\r\nRegistry.REG_QWORD = REG_QWORD;\r\n\r\n/**\r\n * Registry value type BINARY.\r\n * @type {string}\r\n */\r\nRegistry.REG_BINARY = REG_BINARY;\r\n\r\n/**\r\n * Registry value type UNKNOWN.\r\n * @type {string}\r\n */\r\nRegistry.REG_NONE = REG_NONE;\r\n\r\n/**\r\n * Collection of available registry value types.\r\n * @type {array}\r\n */\r\nRegistry.REG_TYPES = REG_TYPES;\r\n\r\n/**\r\n * The name of the default value. May be used instead of the empty string literal for better readability.\r\n * @type {string}\r\n */\r\nRegistry.DEFAULT_VALUE = DEFAULT_VALUE;\r\n\r\n/**\r\n * Retrieve all values from this registry key.\r\n * @param {valuesCallback} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {array=} cb.items - an array of {@link RegistryItem} objects\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.values = function values (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = [ 'QUERY', this.path ];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    } else {\r\n      var items = []\r\n      ,   result = []\r\n      ,   lines = buffer.split('\\n')\r\n      ,   lineNumber = 0\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        var line = lines[i].trim();\r\n        if (line.length > 0) {\r\n          log(line);\r\n          if (lineNumber != 0) {\r\n            items.push(line);\r\n          }\r\n          ++lineNumber;\r\n        }\r\n      }\r\n\r\n      for (var i = 0, l = items.length; i < l; i++) {\r\n\r\n        var match = ITEM_PATTERN.exec(items[i])\r\n        ,   name\r\n        ,   type\r\n        ,   value\r\n\r\n        if (match) {\r\n          name = match[1].trim();\r\n          type = match[2].trim();\r\n          value = match[3];\r\n          result.push(new RegistryItem(self.host, self.hive, self.key, name, type, value, self.arch));\r\n        }\r\n      }\r\n\r\n      cb(null, result);\r\n\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Retrieve all subkeys from this registry key.\r\n * @param {function (err, items)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {array=} cb.items - an array of {@link Registry} objects\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.keys = function keys (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = [ 'QUERY', this.path ];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.stdout.on('end', function () {\r\n\r\n    var items = []\r\n    ,   result = []\r\n    ,   lines = buffer.split('\\n')\r\n\r\n    for (var i = 0, l = lines.length; i < l; i++) {\r\n      var line = lines[i].trim();\r\n      if (line.length > 0) {\r\n        log(line);\r\n        items.push(line);\r\n      }\r\n    }\r\n\r\n    for (var i = 0, l = items.length; i < l; i++) {\r\n\r\n      var match = PATH_PATTERN.exec(items[i])\r\n      ,   hive\r\n      ,   key\r\n\r\n      if (match) {\r\n        hive = match[1];\r\n        key  = match[2];\r\n        if (key && (key !== self.key)) {\r\n          result.push(new Registry({\r\n            host: self.host,\r\n            hive: self.hive,\r\n            key:  key,\r\n            arch: self.arch\r\n          }));\r\n        }\r\n      }\r\n    }\r\n\r\n    cb(null, result);\r\n\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Gets a named value from this registry key.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err, item)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {RegistryItem=} cb.item - the retrieved registry item\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.get = function get (name, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['QUERY', this.path];\r\n  if (name == '')\r\n    args.push('/ve');\r\n  else\r\n    args = args.concat(['/v', name]);\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   buffer = ''\r\n  ,   self = this\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('QUERY', code, output), null);\r\n    } else {\r\n      var items = []\r\n      ,   result = null\r\n      ,   lines = buffer.split('\\n')\r\n      ,   lineNumber = 0\r\n\r\n      for (var i = 0, l = lines.length; i < l; i++) {\r\n        var line = lines[i].trim();\r\n        if (line.length > 0) {\r\n          log(line);\r\n          if (lineNumber != 0) {\r\n             items.push(line);\r\n          }\r\n          ++lineNumber;\r\n        }\r\n      }\r\n\r\n      //Get last item - so it works in XP where REG QUERY returns with a header\r\n      var item = items[items.length-1] || ''\r\n      ,   match = ITEM_PATTERN.exec(item)\r\n      ,   name\r\n      ,   type\r\n      ,   value\r\n\r\n      if (match) {\r\n        name = match[1].trim();\r\n        type = match[2].trim();\r\n        value = match[3];\r\n        result = new RegistryItem(self.host, self.hive, self.key, name, type, value, self.arch);\r\n      }\r\n\r\n      cb(null, result);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    buffer += data.toString();\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Sets a named value in this registry key, overwriting an already existing value.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {string} type - the value type\r\n * @param {string} value - the value\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.set = function set (name, type, value, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  if (REG_TYPES.indexOf(type) == -1)\r\n    throw Error('illegal type specified.');\r\n\r\n  var args = ['ADD', this.path];\r\n  if (name == '')\r\n    args.push('/ve');\r\n  else\r\n    args = args.concat(['/v', name]);\r\n\r\n  args = args.concat(['/t', type, '/d', value, '/f']);\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('ADD', code, output, null));\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove a named value from this registry key. If name is empty, sets the default value of this key.\r\n * Note: This key must be already existing.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.remove = function remove (name, cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = name ? ['DELETE', this.path, '/f', '/v', name] : ['DELETE', this.path, '/f', '/ve'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('DELETE', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove all subkeys and values (including the default value) from this registry key.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.clear = function clear (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['DELETE', this.path, '/f', '/va'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if(error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg(\"DELETE\", code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Alias for the clear method to keep it backward compatible.\r\n * @method\r\n * @deprecated Use {@link Registry#clear} or {@link Registry#destroy} in favour of this method.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.erase = Registry.prototype.clear;\r\n\r\n/**\r\n * Delete this key and all subkeys from the registry.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.destroy = function destroy (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['DELETE', this.path, '/f'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('DELETE', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Create this registry key. Note that this is a no-op if the key already exists.\r\n * @param {function (err)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.create = function create (cb) {\r\n\r\n  if (typeof cb !== 'function')\r\n    throw new TypeError('must specify a callback');\r\n\r\n  var args = ['ADD', this.path, '/f'];\r\n\r\n  pushArch(args, this.arch);\r\n\r\n  var proc = spawn(getRegExePath(), args, {\r\n        cwd: undefined,\r\n        env: process.env,\r\n        stdio: [ 'ignore', 'pipe', 'pipe' ]\r\n      })\r\n  ,   error = null // null means no error previously reported.\r\n\r\n  var output = captureOutput(proc);\r\n\r\n  proc.on('close', function (code) {\r\n    if (error) {\r\n      return;\r\n    } else if (code !== 0) {\r\n      log('process exited with code ' + code);\r\n      cb(mkErrorMsg('ADD', code, output), null);\r\n    } else {\r\n      cb(null);\r\n    }\r\n  });\r\n\r\n  proc.stdout.on('data', function (data) {\r\n    // simply discard output\r\n    log(''+data);\r\n  });\r\n\r\n  proc.on('error', function(err) {\r\n    error = err;\r\n    cb(err);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Checks if this key already exists.\r\n * @param {function (err, exists)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {boolean=} cb.exists - true if a registry key with this name already exists\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.keyExists = function keyExists (cb) {\r\n\r\n  this.values(function (err, items) {\r\n    if (err) {\r\n      // process should return with code 1 if key not found\r\n      if (err.code == 1) {\r\n        return cb(null, false);\r\n      }\r\n      // other error\r\n      return cb(err);\r\n    }\r\n    cb(null, true);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Checks if a value with the given name already exists within this key.\r\n * @param {string} name - the value name, use {@link Registry.DEFAULT_VALUE} or an empty string for the default value\r\n * @param {function (err, exists)} cb - callback function\r\n * @param {ProcessUncleanExitError=} cb.err - error object or null if successful\r\n * @param {boolean=} cb.exists - true if a value with the given name was found in this key\r\n * @returns {Registry} this registry key object\r\n */\r\nRegistry.prototype.valueExists = function valueExists (name, cb) {\r\n\r\n  this.get(name, function (err, item) {\r\n    if (err) {\r\n      // process should return with code 1 if value not found\r\n      if (err.code == 1) {\r\n        return cb(null, false);\r\n      }\r\n      // other error\r\n      return cb(err);\r\n    }\r\n    cb(null, true);\r\n  });\r\n\r\n  return this;\r\n};\r\n\r\nmodule.exports = Registry;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst fs = require(\"fs\");\r\nconst SemVer = require(\"semver\");\r\nconst client_1 = require(\"./client\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst colorProvider_1 = require(\"./colorProvider\");\r\nconst configuration_1 = require(\"./configuration\");\r\nconst implementation_1 = require(\"./implementation\");\r\nconst typeDefinition_1 = require(\"./typeDefinition\");\r\nconst workspaceFolders_1 = require(\"./workspaceFolders\");\r\nconst foldingRange_1 = require(\"./foldingRange\");\r\nconst declaration_1 = require(\"./declaration\");\r\nconst Is = require(\"./utils/is\");\r\nconst processes_1 = require(\"./utils/processes\");\r\n__export(require(\"./client\"));\r\nconst REQUIRED_VSCODE_VERSION = '^1.30'; // do not change format, updated by `updateVSCode` script\r\nvar Executable;\r\n(function (Executable) {\r\n    function is(value) {\r\n        return Is.string(value.command);\r\n    }\r\n    Executable.is = is;\r\n})(Executable || (Executable = {}));\r\nvar TransportKind;\r\n(function (TransportKind) {\r\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\r\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\r\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\r\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\r\n})(TransportKind = exports.TransportKind || (exports.TransportKind = {}));\r\nvar Transport;\r\n(function (Transport) {\r\n    function isSocket(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\r\n    }\r\n    Transport.isSocket = isSocket;\r\n})(Transport || (Transport = {}));\r\nvar NodeModule;\r\n(function (NodeModule) {\r\n    function is(value) {\r\n        return Is.string(value.module);\r\n    }\r\n    NodeModule.is = is;\r\n})(NodeModule || (NodeModule = {}));\r\nvar StreamInfo;\r\n(function (StreamInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.writer !== void 0 && candidate.reader !== void 0;\r\n    }\r\n    StreamInfo.is = is;\r\n})(StreamInfo || (StreamInfo = {}));\r\nvar ChildProcessInfo;\r\n(function (ChildProcessInfo) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && candidate.process !== void 0 && typeof candidate.detached === 'boolean';\r\n    }\r\n    ChildProcessInfo.is = is;\r\n})(ChildProcessInfo || (ChildProcessInfo = {}));\r\nclass LanguageClient extends client_1.BaseLanguageClient {\r\n    constructor(arg1, arg2, arg3, arg4, arg5) {\r\n        let id;\r\n        let name;\r\n        let serverOptions;\r\n        let clientOptions;\r\n        let forceDebug;\r\n        if (Is.string(arg2)) {\r\n            id = arg1;\r\n            name = arg2;\r\n            serverOptions = arg3;\r\n            clientOptions = arg4;\r\n            forceDebug = !!arg5;\r\n        }\r\n        else {\r\n            id = arg1.toLowerCase();\r\n            name = arg1;\r\n            serverOptions = arg2;\r\n            clientOptions = arg3;\r\n            forceDebug = arg4;\r\n        }\r\n        if (forceDebug === void 0) {\r\n            forceDebug = false;\r\n        }\r\n        super(id, name, clientOptions);\r\n        this._serverOptions = serverOptions;\r\n        this._forceDebug = forceDebug;\r\n        try {\r\n            this.checkVersion();\r\n        }\r\n        catch (error) {\r\n            if (Is.string(error.message)) {\r\n                this.outputChannel.appendLine(error.message);\r\n            }\r\n            throw error;\r\n        }\r\n    }\r\n    checkVersion() {\r\n        let codeVersion = SemVer.parse(vscode_1.version);\r\n        if (!codeVersion) {\r\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\r\n        }\r\n        // Remove the insider pre-release since we stay API compatible.\r\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\r\n            codeVersion.prerelease = [];\r\n        }\r\n        if (!SemVer.satisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\r\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\r\n        }\r\n    }\r\n    stop() {\r\n        return super.stop().then(() => {\r\n            if (this._serverProcess) {\r\n                let toCheck = this._serverProcess;\r\n                this._serverProcess = undefined;\r\n                if (this._isDetached === void 0 || !this._isDetached) {\r\n                    this.checkProcessDied(toCheck);\r\n                }\r\n                this._isDetached = undefined;\r\n            }\r\n        });\r\n    }\r\n    checkProcessDied(childProcess) {\r\n        if (!childProcess) {\r\n            return;\r\n        }\r\n        setTimeout(() => {\r\n            // Test if the process is still alive. Throws an exception if not\r\n            try {\r\n                process.kill(childProcess.pid, 0);\r\n                processes_1.terminate(childProcess);\r\n            }\r\n            catch (error) {\r\n                // All is fine.\r\n            }\r\n        }, 2000);\r\n    }\r\n    handleConnectionClosed() {\r\n        this._serverProcess = undefined;\r\n        super.handleConnectionClosed();\r\n    }\r\n    createMessageTransports(encoding) {\r\n        function getEnvironment(env) {\r\n            if (!env) {\r\n                return process.env;\r\n            }\r\n            let result = Object.create(null);\r\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\r\n            Object.keys(env).forEach(key => result[key] = env[key]);\r\n            return result;\r\n        }\r\n        function startedInDebugMode() {\r\n            let args = process.execArgv;\r\n            if (args) {\r\n                return args.some((arg) => /^--debug=?/.test(arg) || /^--debug-brk=?/.test(arg) || /^--inspect=?/.test(arg) || /^--inspect-brk=?/.test(arg));\r\n            }\r\n            ;\r\n            return false;\r\n        }\r\n        let server = this._serverOptions;\r\n        // We got a function.\r\n        if (Is.func(server)) {\r\n            return server().then((result) => {\r\n                if (client_1.MessageTransports.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return result;\r\n                }\r\n                else if (StreamInfo.is(result)) {\r\n                    this._isDetached = !!result.detached;\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(result.reader), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(result.writer) };\r\n                }\r\n                else {\r\n                    let cp;\r\n                    if (ChildProcessInfo.is(result)) {\r\n                        cp = result.process;\r\n                        this._isDetached = result.detached;\r\n                    }\r\n                    else {\r\n                        cp = result;\r\n                        this._isDetached = false;\r\n                    }\r\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                    return { reader: new vscode_languageserver_protocol_1.StreamMessageReader(cp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(cp.stdin) };\r\n                }\r\n            });\r\n        }\r\n        let json;\r\n        let runDebug = server;\r\n        if (runDebug.run || runDebug.debug) {\r\n            // We are under debugging. So use debug as well.\r\n            if (typeof v8debug === 'object' || this._forceDebug || startedInDebugMode()) {\r\n                json = runDebug.debug;\r\n            }\r\n            else {\r\n                json = runDebug.run;\r\n            }\r\n        }\r\n        else {\r\n            json = server;\r\n        }\r\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\r\n            if (NodeModule.is(json) && json.module) {\r\n                let node = json;\r\n                let transport = node.transport || TransportKind.stdio;\r\n                if (node.runtime) {\r\n                    let args = [];\r\n                    let options = node.options || Object.create(null);\r\n                    if (options.execArgv) {\r\n                        options.execArgv.forEach(element => args.push(element));\r\n                    }\r\n                    args.push(node.module);\r\n                    if (node.args) {\r\n                        node.args.forEach(element => args.push(element));\r\n                    }\r\n                    let execOptions = Object.create(null);\r\n                    execOptions.cwd = serverWorkingDir;\r\n                    execOptions.env = getEnvironment(options.env);\r\n                    let pipeName = undefined;\r\n                    if (transport === TransportKind.ipc) {\r\n                        // exec options not correctly typed in lib\r\n                        execOptions.stdio = [null, null, null, 'ipc'];\r\n                        args.push('--node-ipc');\r\n                    }\r\n                    else if (transport === TransportKind.stdio) {\r\n                        args.push('--stdio');\r\n                    }\r\n                    else if (transport === TransportKind.pipe) {\r\n                        pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                        args.push(`--pipe=${pipeName}`);\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        args.push(`--socket=${transport.port}`);\r\n                    }\r\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                        let serverProcess = cp.spawn(node.runtime, args, execOptions);\r\n                        if (!serverProcess || !serverProcess.pid) {\r\n                            return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                        }\r\n                        this._serverProcess = serverProcess;\r\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                        if (transport === TransportKind.ipc) {\r\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(serverProcess) });\r\n                        }\r\n                        else {\r\n                            return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n                        }\r\n                    }\r\n                    else if (transport == TransportKind.pipe) {\r\n                        return vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                    else if (Transport.isSocket(transport)) {\r\n                        return vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                            let process = cp.spawn(node.runtime, args, execOptions);\r\n                            if (!process || !process.pid) {\r\n                                return Promise.reject(`Launching server using runtime ${node.runtime} failed.`);\r\n                            }\r\n                            this._serverProcess = process;\r\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            return transport.onConnected().then((protocol) => {\r\n                                return { reader: protocol[0], writer: protocol[1] };\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                else {\r\n                    let pipeName = undefined;\r\n                    return new Promise((resolve, _reject) => {\r\n                        let args = node.args && node.args.slice() || [];\r\n                        if (transport === TransportKind.ipc) {\r\n                            args.push('--node-ipc');\r\n                        }\r\n                        else if (transport === TransportKind.stdio) {\r\n                            args.push('--stdio');\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            pipeName = vscode_languageserver_protocol_1.generateRandomPipeName();\r\n                            args.push(`--pipe=${pipeName}`);\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            args.push(`--socket=${transport.port}`);\r\n                        }\r\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\r\n                        let options = node.options || Object.create(null);\r\n                        options.execArgv = options.execArgv || [];\r\n                        options.cwd = serverWorkingDir;\r\n                        options.silent = true;\r\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\r\n                            let sp = cp.fork(node.module, args || [], options);\r\n                            this._serverProcess = sp;\r\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                            if (transport === TransportKind.ipc) {\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.IPCMessageReader(this._serverProcess), writer: new vscode_languageserver_protocol_1.IPCMessageWriter(this._serverProcess) });\r\n                            }\r\n                            else {\r\n                                resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(sp.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(sp.stdin) });\r\n                            }\r\n                        }\r\n                        else if (transport === TransportKind.pipe) {\r\n                            vscode_languageserver_protocol_1.createClientPipeTransport(pipeName).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                        else if (Transport.isSocket(transport)) {\r\n                            vscode_languageserver_protocol_1.createClientSocketTransport(transport.port).then((transport) => {\r\n                                let sp = cp.fork(node.module, args || [], options);\r\n                                this._serverProcess = sp;\r\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                                transport.onConnected().then((protocol) => {\r\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\r\n                                });\r\n                            });\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n            else if (Executable.is(json) && json.command) {\r\n                let command = json;\r\n                let args = command.args || [];\r\n                let options = Object.assign({}, command.options);\r\n                options.cwd = options.cwd || serverWorkingDir;\r\n                let serverProcess = cp.spawn(command.command, args, options);\r\n                if (!serverProcess || !serverProcess.pid) {\r\n                    return Promise.reject(`Launching server using command ${command.command} failed.`);\r\n                }\r\n                serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\r\n                this._serverProcess = serverProcess;\r\n                this._isDetached = !!options.detached;\r\n                return Promise.resolve({ reader: new vscode_languageserver_protocol_1.StreamMessageReader(serverProcess.stdout), writer: new vscode_languageserver_protocol_1.StreamMessageWriter(serverProcess.stdin) });\r\n            }\r\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\r\n        });\r\n    }\r\n    registerProposedFeatures() {\r\n        this.registerFeatures(ProposedFeatures.createAll(this));\r\n    }\r\n    registerBuiltinFeatures() {\r\n        super.registerBuiltinFeatures();\r\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\r\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\r\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\r\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\r\n        this.registerFeature(new workspaceFolders_1.WorkspaceFoldersFeature(this));\r\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\r\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\r\n    }\r\n    _mainGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    _getServerWorkingDir(options) {\r\n        let cwd = options && options.cwd;\r\n        if (!cwd) {\r\n            cwd = this.clientOptions.workspaceFolder\r\n                ? this.clientOptions.workspaceFolder.uri.fsPath\r\n                : this._mainGetRootPath();\r\n        }\r\n        if (cwd) {\r\n            // make sure the folder exists otherwise creating the process will fail\r\n            return new Promise(s => {\r\n                fs.lstat(cwd, (err, stats) => {\r\n                    s(!err && stats.isDirectory() ? cwd : undefined);\r\n                });\r\n            });\r\n        }\r\n        return Promise.resolve(undefined);\r\n    }\r\n}\r\nexports.LanguageClient = LanguageClient;\r\nclass SettingMonitor {\r\n    constructor(_client, _setting) {\r\n        this._client = _client;\r\n        this._setting = _setting;\r\n        this._listeners = [];\r\n    }\r\n    start() {\r\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\r\n        this.onDidChangeConfiguration();\r\n        return new vscode_1.Disposable(() => {\r\n            if (this._client.needsStop()) {\r\n                this._client.stop();\r\n            }\r\n        });\r\n    }\r\n    onDidChangeConfiguration() {\r\n        let index = this._setting.indexOf('.');\r\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\r\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\r\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\r\n        if (enabled && this._client.needsStart()) {\r\n            this._client.start();\r\n        }\r\n        else if (!enabled && this._client.needsStop()) {\r\n            this._client.stop();\r\n        }\r\n    }\r\n}\r\nexports.SettingMonitor = SettingMonitor;\r\n// Exporting proposed protocol.\r\nvar ProposedFeatures;\r\n(function (ProposedFeatures) {\r\n    function createAll(_client) {\r\n        let result = [];\r\n        return result;\r\n    }\r\n    ProposedFeatures.createAll = createAll;\r\n})(ProposedFeatures = exports.ProposedFeatures || (exports.ProposedFeatures = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this._emitter = undefined;\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        this.cancel();\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","module.exports = require(\"crypto\");","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n    ;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\n/**\r\n * Represents programming constructs like variables, classes, interfaces etc.\r\n * that appear in a document. Document symbols can be hierarchical and they\r\n * have two ranges: one that encloses its definition and one that points to\r\n * its most interesting range, e.g. the range of an identifier.\r\n */\r\nvar DocumentSymbol = /** @class */ (function () {\r\n    function DocumentSymbol() {\r\n    }\r\n    return DocumentSymbol;\r\n}());\r\nexport { DocumentSymbol };\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void null) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data))\r\n            result.data = data;\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * A document link is a range in a text document that links to an internal or external resource, like another\r\n * text document or a web site.\r\n */\r\nvar DocumentLink = /** @class */ (function () {\r\n    function DocumentLink() {\r\n    }\r\n    return DocumentLink;\r\n}());\r\nexport { DocumentLink };\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nexport var TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = null;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = null;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === null) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new vscode_jsonrpc_1.RequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guaruntee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new vscode_jsonrpc_1.RequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new vscode_jsonrpc_1.NotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new vscode_jsonrpc_1.RequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new vscode_jsonrpc_1.NotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n//---- Configuration notification ----\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new vscode_jsonrpc_1.RequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new vscode_jsonrpc_1.NotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new vscode_jsonrpc_1.NotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didOpen');\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didChange');\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didClose');\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/didSave');\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/willSave');\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/willSaveWaitUntil');\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n//---- File eventing ----\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n//---- Diagnostic notification ----\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new vscode_jsonrpc_1.NotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/completion');\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.type = new vscode_jsonrpc_1.RequestType('completionItem/resolve');\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n//---- Hover Support -------------------------------\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/hover');\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/signatureHelp');\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n//---- Goto Definition -------------------------------------\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/definition');\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/references');\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n//---- Document Highlight ----------------------------------\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentHighlight');\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n//---- Document Symbol Provider ---------------------------\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentSymbol');\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n//---- Workspace Symbol Provider ---------------------------\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.type = new vscode_jsonrpc_1.RequestType('workspace/symbol');\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeAction');\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/codeLens');\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new vscode_jsonrpc_1.RequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/formatting');\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rangeFormatting');\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/onTypeFormatting');\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/rename');\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/prepareRename');\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentLink');\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new vscode_jsonrpc_1.RequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new vscode_jsonrpc_1.RequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new vscode_jsonrpc_1.RequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/implementation');\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/typeDefinition');\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new vscode_jsonrpc_1.RequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new vscode_jsonrpc_1.NotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new vscode_jsonrpc_1.RequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/documentColor');\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/foldingRange');\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.type = new vscode_jsonrpc_1.RequestType('textDocument/declaration');\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), Is.string(context.only) ? [context.only] : undefined);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set('', code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.colorProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.colorProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index));\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.implementationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.implementationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.implementationProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.typeDefinitionProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.typeDefinitionProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const implCapabilities = capabilities.typeDefinitionProvider;\r\n            const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n            const selector = implCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.foldingRangeProvider) {\r\n            return;\r\n        }\r\n        const implCapabilities = capabilities.foldingRangeProvider;\r\n        const id = Is.string(implCapabilities.id) && implCapabilities.id.length > 0 ? implCapabilities.id : UUID.generateUuid();\r\n        const selector = implCapabilities.documentSelector || documentSelector;\r\n        if (selector) {\r\n            this.register(this.messages, {\r\n                id,\r\n                registerOptions: Object.assign({}, { documentSelector: selector })\r\n            });\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        if (!capabilities.declarationProvider) {\r\n            return;\r\n        }\r\n        if (capabilities.declarationProvider === true) {\r\n            if (!documentSelector) {\r\n                return;\r\n            }\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector })\r\n            });\r\n        }\r\n        else {\r\n            const declCapabilities = capabilities.declarationProvider;\r\n            const id = Is.string(declCapabilities.id) && declCapabilities.id.length > 0 ? declCapabilities.id : UUID.generateUuid();\r\n            const selector = declCapabilities.documentSelector || documentSelector;\r\n            if (selector) {\r\n                this.register(this.messages, {\r\n                    id,\r\n                    registerOptions: Object.assign({}, { documentSelector: selector })\r\n                });\r\n            }\r\n        }\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst cp = require(\"child_process\");\r\nconst path_1 = require(\"path\");\r\nconst isWindows = (process.platform === 'win32');\r\nconst isMacintosh = (process.platform === 'darwin');\r\nconst isLinux = (process.platform === 'linux');\r\nfunction terminate(process, cwd) {\r\n    if (isWindows) {\r\n        try {\r\n            // This we run in Atom execFileSync is available.\r\n            // Ignore stderr since this is otherwise piped to parent.stderr\r\n            // which might be already closed.\r\n            let options = {\r\n                stdio: ['pipe', 'pipe', 'ignore']\r\n            };\r\n            if (cwd) {\r\n                options.cwd = cwd;\r\n            }\r\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\r\n            return true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else if (isLinux || isMacintosh) {\r\n        try {\r\n            var cmd = path_1.join(__dirname, 'terminateProcess.sh');\r\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\r\n            return result.error ? false : true;\r\n        }\r\n        catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n    else {\r\n        process.kill('SIGKILL');\r\n        return true;\r\n    }\r\n}\r\nexports.terminate = terminate;\r\n","import * as os from 'os';\nimport * as path from 'path';\nimport { workspace } from 'vscode';\nimport { Executable, ExecutableOptions } from 'vscode-languageclient';\nimport { RequirementsData } from './requirements';\nconst glob = require('glob');\n\nconst DEBUG = startedInDebugMode();\nconst DEBUG_PORT = 1064;\nconst MICROPROFILE_SERVER_NAME = 'org.eclipse.lsp4mp.ls-uber.jar';\nconst MICROPROFILE_SERVER_MAIN_CLASS = 'org.eclipse.lsp4mp.ls.MicroProfileServerLauncher';\n\nexport function prepareExecutable(requirements: RequirementsData, microprofileJavaExtensions: string[]): Executable {\n  const executable: Executable = Object.create(null);\n  const options: ExecutableOptions = Object.create(null);\n  options.env = process.env;\n  options.stdio = 'pipe';\n  executable.options = options;\n  executable.command = path.resolve(requirements.java_home + '/bin/java');\n  executable.args = prepareParams(microprofileJavaExtensions);\n  return executable;\n}\n\nfunction prepareParams(microprofileJavaExtensions: string[]): string[] {\n  const params: string[] = [];\n  if (DEBUG) {\n    if (process.env.SUSPEND_SERVER === 'true') {\n      params.push(`-agentlib:jdwp=transport=dt_socket,server=y,address=${DEBUG_PORT}`);\n    } else {\n      params.push(`-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=${DEBUG_PORT},quiet=y`);\n    }\n  }\n\n  const vmargs = workspace.getConfiguration(\"microprofile.tools\").get(\"server.vmargs\", '');\n  if (os.platform() === 'win32') {\n    const watchParentProcess = '-DwatchParentProcess=';\n    if (vmargs.indexOf(watchParentProcess) < 0) {\n      params.push(watchParentProcess + 'false');\n    }\n  }\n  parseVMargs(params, vmargs);\n  const serverHome: string = path.resolve(__dirname, '../server');\n  const microprofileServerFound: Array<string> = glob.sync(`**/${MICROPROFILE_SERVER_NAME}`, { cwd: serverHome });\n  if (microprofileServerFound.length) {\n    let mpJavaExtensionsClasspath = '';\n    if (microprofileJavaExtensions.length > 0) {\n      const classpathSeperator = os.platform() === 'win32' ? ';' : ':';\n      mpJavaExtensionsClasspath = classpathSeperator + microprofileJavaExtensions.join(classpathSeperator);\n    }\n\n    params.push('-cp');\n    params.push(`${serverHome}/*` + mpJavaExtensionsClasspath);\n    params.push(MICROPROFILE_SERVER_MAIN_CLASS);\n  } else {\n    throw new Error('Unable to find required Language Server JARs');\n  }\n  return params;\n}\n\nfunction hasDebugFlag(args: string[]): boolean {\n  if (args) {\n    // See https://nodejs.org/en/docs/guides/debugging-getting-started/\n    return args.some(arg => /^--inspect/.test(arg) || /^--debug/.test(arg));\n  }\n  return false;\n}\n\nfunction startedInDebugMode(): boolean {\n  const args: string[] = process.execArgv;\n  return hasDebugFlag(args);\n}\n\n// exported for tests\nexport function parseVMargs(params: any[], vmargsLine: string) {\n  if (!vmargsLine) {\n    return;\n  }\n  const vmargs = vmargsLine.match(/(?:[^\\s\"]+|\"[^\"]*\")+/g);\n  if (vmargs === null) {\n    return;\n  }\n  vmargs.forEach(arg => {\n    // remove all standalone double quotes\n    arg = arg.replace(/(\\\\)?\"/g, ($0, $1) => { return ($1 ? $0 : ''); });\n    // unescape all escaped double quotes\n    arg = arg.replace(/(\\\\)\"/g, '\"');\n    if (params.indexOf(arg) < 0) {\n      params.push(arg);\n    }\n  });\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar pathModule = require('path');\nvar isWindows = process.platform === 'win32';\nvar fs = require('fs');\n\n// JavaScript implementation of realpath, ported from node pre-v6\n\nvar DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);\n\nfunction rethrow() {\n  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and\n  // is fairly slow to generate.\n  var callback;\n  if (DEBUG) {\n    var backtrace = new Error;\n    callback = debugCallback;\n  } else\n    callback = missingCallback;\n\n  return callback;\n\n  function debugCallback(err) {\n    if (err) {\n      backtrace.message = err.message;\n      err = backtrace;\n      missingCallback(err);\n    }\n  }\n\n  function missingCallback(err) {\n    if (err) {\n      if (process.throwDeprecation)\n        throw err;  // Forgot a callback but don't know where? Use NODE_DEBUG=fs\n      else if (!process.noDeprecation) {\n        var msg = 'fs: missing callback ' + (err.stack || err.message);\n        if (process.traceDeprecation)\n          console.trace(msg);\n        else\n          console.error(msg);\n      }\n    }\n  }\n}\n\nfunction maybeCallback(cb) {\n  return typeof cb === 'function' ? cb : rethrow();\n}\n\nvar normalize = pathModule.normalize;\n\n// Regexp that finds the next partion of a (partial) path\n// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']\nif (isWindows) {\n  var nextPartRe = /(.*?)(?:[\\/\\\\]+|$)/g;\n} else {\n  var nextPartRe = /(.*?)(?:[\\/]+|$)/g;\n}\n\n// Regex to find the device root, including trailing slash. E.g. 'c:\\\\'.\nif (isWindows) {\n  var splitRootRe = /^(?:[a-zA-Z]:|[\\\\\\/]{2}[^\\\\\\/]+[\\\\\\/][^\\\\\\/]+)?[\\\\\\/]*/;\n} else {\n  var splitRootRe = /^[\\/]*/;\n}\n\nexports.realpathSync = function realpathSync(p, cache) {\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return cache[p];\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstatSync(base);\n      knownHard[base] = true;\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  // NB: p.length changes.\n  while (pos < p.length) {\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      continue;\n    }\n\n    var resolvedLink;\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // some known symbolic link.  no need to stat again.\n      resolvedLink = cache[base];\n    } else {\n      var stat = fs.lstatSync(base);\n      if (!stat.isSymbolicLink()) {\n        knownHard[base] = true;\n        if (cache) cache[base] = base;\n        continue;\n      }\n\n      // read the link if it wasn't read before\n      // dev/ino always return 0 on windows, so skip the check.\n      var linkTarget = null;\n      if (!isWindows) {\n        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n        if (seenLinks.hasOwnProperty(id)) {\n          linkTarget = seenLinks[id];\n        }\n      }\n      if (linkTarget === null) {\n        fs.statSync(base);\n        linkTarget = fs.readlinkSync(base);\n      }\n      resolvedLink = pathModule.resolve(previous, linkTarget);\n      // track this, if given a cache.\n      if (cache) cache[base] = resolvedLink;\n      if (!isWindows) seenLinks[id] = linkTarget;\n    }\n\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n\n  if (cache) cache[original] = p;\n\n  return p;\n};\n\n\nexports.realpath = function realpath(p, cache, cb) {\n  if (typeof cb !== 'function') {\n    cb = maybeCallback(cache);\n    cache = null;\n  }\n\n  // make p is absolute\n  p = pathModule.resolve(p);\n\n  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {\n    return process.nextTick(cb.bind(null, null, cache[p]));\n  }\n\n  var original = p,\n      seenLinks = {},\n      knownHard = {};\n\n  // current character position in p\n  var pos;\n  // the partial path so far, including a trailing slash if any\n  var current;\n  // the partial path without a trailing slash (except when pointing at a root)\n  var base;\n  // the partial path scanned in the previous round, with slash\n  var previous;\n\n  start();\n\n  function start() {\n    // Skip over roots\n    var m = splitRootRe.exec(p);\n    pos = m[0].length;\n    current = m[0];\n    base = m[0];\n    previous = '';\n\n    // On windows, check that the root exists. On unix there is no need.\n    if (isWindows && !knownHard[base]) {\n      fs.lstat(base, function(err) {\n        if (err) return cb(err);\n        knownHard[base] = true;\n        LOOP();\n      });\n    } else {\n      process.nextTick(LOOP);\n    }\n  }\n\n  // walk down the path, swapping out linked pathparts for their real\n  // values\n  function LOOP() {\n    // stop if scanned past end of path\n    if (pos >= p.length) {\n      if (cache) cache[original] = p;\n      return cb(null, p);\n    }\n\n    // find the next part\n    nextPartRe.lastIndex = pos;\n    var result = nextPartRe.exec(p);\n    previous = current;\n    current += result[0];\n    base = previous + result[1];\n    pos = nextPartRe.lastIndex;\n\n    // continue if not a symlink\n    if (knownHard[base] || (cache && cache[base] === base)) {\n      return process.nextTick(LOOP);\n    }\n\n    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {\n      // known symbolic link.  no need to stat again.\n      return gotResolvedLink(cache[base]);\n    }\n\n    return fs.lstat(base, gotStat);\n  }\n\n  function gotStat(err, stat) {\n    if (err) return cb(err);\n\n    // if not a symlink, skip to the next path part\n    if (!stat.isSymbolicLink()) {\n      knownHard[base] = true;\n      if (cache) cache[base] = base;\n      return process.nextTick(LOOP);\n    }\n\n    // stat & read the link if not read before\n    // call gotTarget as soon as the link target is known\n    // dev/ino always return 0 on windows, so skip the check.\n    if (!isWindows) {\n      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);\n      if (seenLinks.hasOwnProperty(id)) {\n        return gotTarget(null, seenLinks[id], base);\n      }\n    }\n    fs.stat(base, function(err) {\n      if (err) return cb(err);\n\n      fs.readlink(base, function(err, target) {\n        if (!isWindows) seenLinks[id] = target;\n        gotTarget(err, target);\n      });\n    });\n  }\n\n  function gotTarget(err, target, base) {\n    if (err) return cb(err);\n\n    var resolvedLink = pathModule.resolve(previous, target);\n    if (cache) cache[base] = resolvedLink;\n    gotResolvedLink(resolvedLink);\n  }\n\n  function gotResolvedLink(resolvedLink) {\n    // resolve the link, then start over\n    p = pathModule.resolve(resolvedLink, p.slice(pos));\n    start();\n  }\n};\n","var concatMap = require('concat-map');\nvar balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction identity(e) {\n  return e;\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m || /\\$$/.test(m.pre)) return [str];\n\n  var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n  var isSequence = isNumericSequence || isAlphaSequence;\n  var isOptions = m.body.indexOf(',') >= 0;\n  if (!isSequence && !isOptions) {\n    // {a},b}\n    if (m.post.match(/,.*\\}/)) {\n      str = m.pre + '{' + m.body + escClose + m.post;\n      return expand(str);\n    }\n    return [str];\n  }\n\n  var n;\n  if (isSequence) {\n    n = m.body.split(/\\.\\./);\n  } else {\n    n = parseCommaParts(m.body);\n    if (n.length === 1) {\n      // x{{a,b}}y ==> x{a}y x{b}y\n      n = expand(n[0], false).map(embrace);\n      if (n.length === 1) {\n        var post = m.post.length\n          ? expand(m.post, false)\n          : [''];\n        return post.map(function(p) {\n          return m.pre + n[0] + p;\n        });\n      }\n    }\n  }\n\n  // at this point, n is the parts, and we know it's not a comma set\n  // with a single entry.\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  var N;\n\n  if (isSequence) {\n    var x = numeric(n[0]);\n    var y = numeric(n[1]);\n    var width = Math.max(n[0].length, n[1].length)\n    var incr = n.length == 3\n      ? Math.abs(numeric(n[2]))\n      : 1;\n    var test = lte;\n    var reverse = y < x;\n    if (reverse) {\n      incr *= -1;\n      test = gte;\n    }\n    var pad = n.some(isPadded);\n\n    N = [];\n\n    for (var i = x; test(i, y); i += incr) {\n      var c;\n      if (isAlphaSequence) {\n        c = String.fromCharCode(i);\n        if (c === '\\\\')\n          c = '';\n      } else {\n        c = String(i);\n        if (pad) {\n          var need = width - c.length;\n          if (need > 0) {\n            var z = new Array(need + 1).join('0');\n            if (i < 0)\n              c = '-' + z + c.slice(1);\n            else\n              c = z + c;\n          }\n        }\n      }\n      N.push(c);\n    }\n  } else {\n    N = concatMap(n, function(el) { return expand(el, false) });\n  }\n\n  for (var j = 0; j < N.length; j++) {\n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre + N[j] + post[k];\n      if (!isTop || isSequence || expansion)\n        expansions.push(expansion);\n    }\n  }\n\n  return expansions;\n}\n\n","module.exports = function (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        var x = fn(xs[i], i);\n        if (isArray(x)) res.push.apply(res, x);\n        else res.push(x);\n    }\n    return res;\n};\n\nvar isArray = Array.isArray || function (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n","try {\n  var util = require('util');\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","module.exports = require(\"events\");","module.exports = globSync\nglobSync.GlobSync = GlobSync\n\nvar fs = require('fs')\nvar rp = require('fs.realpath')\nvar minimatch = require('minimatch')\nvar Minimatch = minimatch.Minimatch\nvar Glob = require('./glob.js').Glob\nvar util = require('util')\nvar path = require('path')\nvar assert = require('assert')\nvar isAbsolute = require('path-is-absolute')\nvar common = require('./common.js')\nvar alphasort = common.alphasort\nvar alphasorti = common.alphasorti\nvar setopts = common.setopts\nvar ownProp = common.ownProp\nvar childrenIgnored = common.childrenIgnored\nvar isIgnored = common.isIgnored\n\nfunction globSync (pattern, options) {\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  return new GlobSync(pattern, options).found\n}\n\nfunction GlobSync (pattern, options) {\n  if (!pattern)\n    throw new Error('must provide pattern')\n\n  if (typeof options === 'function' || arguments.length === 3)\n    throw new TypeError('callback provided to sync glob\\n'+\n                        'See: https://github.com/isaacs/node-glob/issues/167')\n\n  if (!(this instanceof GlobSync))\n    return new GlobSync(pattern, options)\n\n  setopts(this, pattern, options)\n\n  if (this.noprocess)\n    return this\n\n  var n = this.minimatch.set.length\n  this.matches = new Array(n)\n  for (var i = 0; i < n; i ++) {\n    this._process(this.minimatch.set[i], i, false)\n  }\n  this._finish()\n}\n\nGlobSync.prototype._finish = function () {\n  assert(this instanceof GlobSync)\n  if (this.realpath) {\n    var self = this\n    this.matches.forEach(function (matchset, index) {\n      var set = self.matches[index] = Object.create(null)\n      for (var p in matchset) {\n        try {\n          p = self._makeAbs(p)\n          var real = rp.realpathSync(p, self.realpathCache)\n          set[real] = true\n        } catch (er) {\n          if (er.syscall === 'stat')\n            set[self._makeAbs(p)] = true\n          else\n            throw er\n        }\n      }\n    })\n  }\n  common.finish(this)\n}\n\n\nGlobSync.prototype._process = function (pattern, index, inGlobStar) {\n  assert(this instanceof GlobSync)\n\n  // Get the first [n] parts of pattern that are all strings.\n  var n = 0\n  while (typeof pattern[n] === 'string') {\n    n ++\n  }\n  // now n is the index of the first one that is *not* a string.\n\n  // See if there's anything else\n  var prefix\n  switch (n) {\n    // if not, then this is rather simple\n    case pattern.length:\n      this._processSimple(pattern.join('/'), index)\n      return\n\n    case 0:\n      // pattern *starts* with some non-trivial item.\n      // going to readdir(cwd), but not include the prefix in matches.\n      prefix = null\n      break\n\n    default:\n      // pattern has some string bits in the front.\n      // whatever it starts with, whether that's 'absolute' like /foo/bar,\n      // or 'relative' like '../baz'\n      prefix = pattern.slice(0, n).join('/')\n      break\n  }\n\n  var remain = pattern.slice(n)\n\n  // get the list of entries.\n  var read\n  if (prefix === null)\n    read = '.'\n  else if (isAbsolute(prefix) || isAbsolute(pattern.join('/'))) {\n    if (!prefix || !isAbsolute(prefix))\n      prefix = '/' + prefix\n    read = prefix\n  } else\n    read = prefix\n\n  var abs = this._makeAbs(read)\n\n  //if ignored, skip processing\n  if (childrenIgnored(this, read))\n    return\n\n  var isGlobStar = remain[0] === minimatch.GLOBSTAR\n  if (isGlobStar)\n    this._processGlobStar(prefix, read, abs, remain, index, inGlobStar)\n  else\n    this._processReaddir(prefix, read, abs, remain, index, inGlobStar)\n}\n\n\nGlobSync.prototype._processReaddir = function (prefix, read, abs, remain, index, inGlobStar) {\n  var entries = this._readdir(abs, inGlobStar)\n\n  // if the abs isn't a dir, then nothing can match!\n  if (!entries)\n    return\n\n  // It will only match dot entries if it starts with a dot, or if\n  // dot is set.  Stuff like @(.foo|.bar) isn't allowed.\n  var pn = remain[0]\n  var negate = !!this.minimatch.negate\n  var rawGlob = pn._glob\n  var dotOk = this.dot || rawGlob.charAt(0) === '.'\n\n  var matchedEntries = []\n  for (var i = 0; i < entries.length; i++) {\n    var e = entries[i]\n    if (e.charAt(0) !== '.' || dotOk) {\n      var m\n      if (negate && !prefix) {\n        m = !e.match(pn)\n      } else {\n        m = e.match(pn)\n      }\n      if (m)\n        matchedEntries.push(e)\n    }\n  }\n\n  var len = matchedEntries.length\n  // If there are no matched entries, then nothing matches.\n  if (len === 0)\n    return\n\n  // if this is the last remaining pattern bit, then no need for\n  // an additional stat *unless* the user has specified mark or\n  // stat explicitly.  We know they exist, since readdir returned\n  // them.\n\n  if (remain.length === 1 && !this.mark && !this.stat) {\n    if (!this.matches[index])\n      this.matches[index] = Object.create(null)\n\n    for (var i = 0; i < len; i ++) {\n      var e = matchedEntries[i]\n      if (prefix) {\n        if (prefix.slice(-1) !== '/')\n          e = prefix + '/' + e\n        else\n          e = prefix + e\n      }\n\n      if (e.charAt(0) === '/' && !this.nomount) {\n        e = path.join(this.root, e)\n      }\n      this._emitMatch(index, e)\n    }\n    // This was the last one, and no stats were needed\n    return\n  }\n\n  // now test all matched entries as stand-ins for that part\n  // of the pattern.\n  remain.shift()\n  for (var i = 0; i < len; i ++) {\n    var e = matchedEntries[i]\n    var newPattern\n    if (prefix)\n      newPattern = [prefix, e]\n    else\n      newPattern = [e]\n    this._process(newPattern.concat(remain), index, inGlobStar)\n  }\n}\n\n\nGlobSync.prototype._emitMatch = function (index, e) {\n  if (isIgnored(this, e))\n    return\n\n  var abs = this._makeAbs(e)\n\n  if (this.mark)\n    e = this._mark(e)\n\n  if (this.absolute) {\n    e = abs\n  }\n\n  if (this.matches[index][e])\n    return\n\n  if (this.nodir) {\n    var c = this.cache[abs]\n    if (c === 'DIR' || Array.isArray(c))\n      return\n  }\n\n  this.matches[index][e] = true\n\n  if (this.stat)\n    this._stat(e)\n}\n\n\nGlobSync.prototype._readdirInGlobStar = function (abs) {\n  // follow all symlinked directories forever\n  // just proceed as if this is a non-globstar situation\n  if (this.follow)\n    return this._readdir(abs, false)\n\n  var entries\n  var lstat\n  var stat\n  try {\n    lstat = fs.lstatSync(abs)\n  } catch (er) {\n    if (er.code === 'ENOENT') {\n      // lstat failed, doesn't exist\n      return null\n    }\n  }\n\n  var isSym = lstat && lstat.isSymbolicLink()\n  this.symlinks[abs] = isSym\n\n  // If it's not a symlink or a dir, then it's definitely a regular file.\n  // don't bother doing a readdir in that case.\n  if (!isSym && lstat && !lstat.isDirectory())\n    this.cache[abs] = 'FILE'\n  else\n    entries = this._readdir(abs, false)\n\n  return entries\n}\n\nGlobSync.prototype._readdir = function (abs, inGlobStar) {\n  var entries\n\n  if (inGlobStar && !ownProp(this.symlinks, abs))\n    return this._readdirInGlobStar(abs)\n\n  if (ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n    if (!c || c === 'FILE')\n      return null\n\n    if (Array.isArray(c))\n      return c\n  }\n\n  try {\n    return this._readdirEntries(abs, fs.readdirSync(abs))\n  } catch (er) {\n    this._readdirError(abs, er)\n    return null\n  }\n}\n\nGlobSync.prototype._readdirEntries = function (abs, entries) {\n  // if we haven't asked to stat everything, then just\n  // assume that everything in there exists, so we can avoid\n  // having to stat it a second time.\n  if (!this.mark && !this.stat) {\n    for (var i = 0; i < entries.length; i ++) {\n      var e = entries[i]\n      if (abs === '/')\n        e = abs + e\n      else\n        e = abs + '/' + e\n      this.cache[e] = true\n    }\n  }\n\n  this.cache[abs] = entries\n\n  // mark and cache dir-ness\n  return entries\n}\n\nGlobSync.prototype._readdirError = function (f, er) {\n  // handle errors, and cache the information\n  switch (er.code) {\n    case 'ENOTSUP': // https://github.com/isaacs/node-glob/issues/205\n    case 'ENOTDIR': // totally normal. means it *does* exist.\n      var abs = this._makeAbs(f)\n      this.cache[abs] = 'FILE'\n      if (abs === this.cwdAbs) {\n        var error = new Error(er.code + ' invalid cwd ' + this.cwd)\n        error.path = this.cwd\n        error.code = er.code\n        throw error\n      }\n      break\n\n    case 'ENOENT': // not terribly unusual\n    case 'ELOOP':\n    case 'ENAMETOOLONG':\n    case 'UNKNOWN':\n      this.cache[this._makeAbs(f)] = false\n      break\n\n    default: // some unusual error.  Treat as failure.\n      this.cache[this._makeAbs(f)] = false\n      if (this.strict)\n        throw er\n      if (!this.silent)\n        console.error('glob error', er)\n      break\n  }\n}\n\nGlobSync.prototype._processGlobStar = function (prefix, read, abs, remain, index, inGlobStar) {\n\n  var entries = this._readdir(abs, inGlobStar)\n\n  // no entries means not a dir, so it can never have matches\n  // foo.txt/** doesn't match foo.txt\n  if (!entries)\n    return\n\n  // test without the globstar, and with every child both below\n  // and replacing the globstar.\n  var remainWithoutGlobStar = remain.slice(1)\n  var gspref = prefix ? [ prefix ] : []\n  var noGlobStar = gspref.concat(remainWithoutGlobStar)\n\n  // the noGlobStar pattern exits the inGlobStar state\n  this._process(noGlobStar, index, false)\n\n  var len = entries.length\n  var isSym = this.symlinks[abs]\n\n  // If it's a symlink, and we're in a globstar, then stop\n  if (isSym && inGlobStar)\n    return\n\n  for (var i = 0; i < len; i++) {\n    var e = entries[i]\n    if (e.charAt(0) === '.' && !this.dot)\n      continue\n\n    // these two cases enter the inGlobStar state\n    var instead = gspref.concat(entries[i], remainWithoutGlobStar)\n    this._process(instead, index, true)\n\n    var below = gspref.concat(entries[i], remain)\n    this._process(below, index, true)\n  }\n}\n\nGlobSync.prototype._processSimple = function (prefix, index) {\n  // XXX review this.  Shouldn't it be doing the mounting etc\n  // before doing stat?  kinda weird?\n  var exists = this._stat(prefix)\n\n  if (!this.matches[index])\n    this.matches[index] = Object.create(null)\n\n  // If it doesn't exist, then just mark the lack of results\n  if (!exists)\n    return\n\n  if (prefix && isAbsolute(prefix) && !this.nomount) {\n    var trail = /[\\/\\\\]$/.test(prefix)\n    if (prefix.charAt(0) === '/') {\n      prefix = path.join(this.root, prefix)\n    } else {\n      prefix = path.resolve(this.root, prefix)\n      if (trail)\n        prefix += '/'\n    }\n  }\n\n  if (process.platform === 'win32')\n    prefix = prefix.replace(/\\\\/g, '/')\n\n  // Mark this as a match\n  this._emitMatch(index, prefix)\n}\n\n// Returns either 'DIR', 'FILE', or false\nGlobSync.prototype._stat = function (f) {\n  var abs = this._makeAbs(f)\n  var needDir = f.slice(-1) === '/'\n\n  if (f.length > this.maxLength)\n    return false\n\n  if (!this.stat && ownProp(this.cache, abs)) {\n    var c = this.cache[abs]\n\n    if (Array.isArray(c))\n      c = 'DIR'\n\n    // It exists, but maybe not how we need it\n    if (!needDir || c === 'DIR')\n      return c\n\n    if (needDir && c === 'FILE')\n      return false\n\n    // otherwise we have to stat, because maybe c=true\n    // if we know it exists, but not what it is.\n  }\n\n  var exists\n  var stat = this.statCache[abs]\n  if (!stat) {\n    var lstat\n    try {\n      lstat = fs.lstatSync(abs)\n    } catch (er) {\n      if (er && (er.code === 'ENOENT' || er.code === 'ENOTDIR')) {\n        this.statCache[abs] = false\n        return false\n      }\n    }\n\n    if (lstat && lstat.isSymbolicLink()) {\n      try {\n        stat = fs.statSync(abs)\n      } catch (er) {\n        stat = lstat\n      }\n    } else {\n      stat = lstat\n    }\n  }\n\n  this.statCache[abs] = stat\n\n  var c = true\n  if (stat)\n    c = stat.isDirectory() ? 'DIR' : 'FILE'\n\n  this.cache[abs] = this.cache[abs] || c\n\n  if (needDir && c === 'FILE')\n    return false\n\n  return c\n}\n\nGlobSync.prototype._mark = function (p) {\n  return common.mark(this, p)\n}\n\nGlobSync.prototype._makeAbs = function (f) {\n  return common.makeAbs(this, f)\n}\n","var wrappy = require('wrappy')\nvar reqs = Object.create(null)\nvar once = require('once')\n\nmodule.exports = wrappy(inflight)\n\nfunction inflight (key, cb) {\n  if (reqs[key]) {\n    reqs[key].push(cb)\n    return null\n  } else {\n    reqs[key] = [cb]\n    return makeres(key)\n  }\n}\n\nfunction makeres (key) {\n  return once(function RES () {\n    var cbs = reqs[key]\n    var len = cbs.length\n    var args = slice(arguments)\n\n    // XXX It's somewhat ambiguous whether a new callback added in this\n    // pass should be queued for later execution if something in the\n    // list of callbacks throws, or if it should just be discarded.\n    // However, it's such an edge case that it hardly matters, and either\n    // choice is likely as surprising as the other.\n    // As it happens, we do go ahead and schedule it for later execution.\n    try {\n      for (var i = 0; i < len; i++) {\n        cbs[i].apply(null, args)\n      }\n    } finally {\n      if (cbs.length > len) {\n        // added more in the interim.\n        // de-zalgo, just in case, but don't call again.\n        cbs.splice(0, len)\n        process.nextTick(function () {\n          RES.apply(null, args)\n        })\n      } else {\n        delete reqs[key]\n      }\n    }\n  })\n}\n\nfunction slice (args) {\n  var length = args.length\n  var array = []\n\n  for (var i = 0; i < length; i++) array[i] = args[i]\n  return array\n}\n","/**\n * Copyright 2019 Red Hat, Inc. and others.\n\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n *     http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ConfigurationTarget, Disposable, commands, workspace, Uri } from 'vscode';\n\nexport namespace CommandKind {\n  export const COMMAND_REFERENCES = 'microprofile.command.references';\n  export const COMMAND_IMPLEMENTATIONS = 'microprofile.command.implementations';\n  export const COMMAND_OPEN_URI = 'microprofile.command.open.uri';\n  export const COMMAND_CONFIGURATION_UPDATE = 'microprofile.command.configuration.update';\n}\n\n/**\n * Registers the `CommandKind.COMMAND_CONFIGURATION_UPDATE` command\n */\nexport function registerConfigurationUpdateCommand(): Disposable {\n  return commands.registerCommand(CommandKind.COMMAND_CONFIGURATION_UPDATE, resolveConfigurationItemEdit);\n}\n\n/**\n * Registers the `microprofile.command.open.uri` command.\n * This command gives the capability to open the given uri of the command.\n */\nexport function registerOpenURICommand(): Disposable {\n  return commands.registerCommand(CommandKind.COMMAND_OPEN_URI, (uri) => {\n    commands.executeCommand('vscode.open', Uri.parse(uri));\n  });\n}\n\n/**\n * Registers the `CommandKind.COMMAND_IMPLEMENTATIONS` command\n */\nexport function registerImplementationsCommand(): Disposable {\n  return commands.registerCommand(CommandKind.COMMAND_IMPLEMENTATIONS, () => {\n\n  });\n}\n\n/**\n * Registers the `CommandKind.COMMAND_REFERENCES` command\n */\nexport function registerReferencesCommand(): Disposable {\n  return commands.registerCommand(CommandKind.COMMAND_REFERENCES, () => {\n\n  });\n}\n\nfunction resolveConfigurationItemEdit<T>(configItemEdit: ConfigurationItemEdit) {\n  switch (configItemEdit.editType) {\n    case ConfigurationItemEditType.Add:\n      addToPreferenceArray<T>(configItemEdit.section, configItemEdit.value);\n      break;\n    case ConfigurationItemEditType.Delete: {\n      break;\n    }\n    case ConfigurationItemEditType.Update: {\n      break;\n    }\n  }\n}\n\nfunction addToPreferenceArray<T>(key: string, value: T): void {\n  const configArray: T[] = workspace.getConfiguration().get<T[]>(key, []);\n  if (configArray.includes(value)) {\n    return;\n  }\n  configArray.push(value);\n  workspace.getConfiguration().update(key, configArray, ConfigurationTarget.Workspace);\n}\n\ninterface ConfigurationItemEdit {\n  section: string;\n  value: any;\n  editType: ConfigurationItemEditType;\n}\n\nenum ConfigurationItemEditType {\n  Add = 0,\n  Delete = 1,\n  Update = 2\n}\n","/**\n * Copyright 2020 Red Hat, Inc. and others.\n\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n\n *     http://www.apache.org/licenses/LICENSE-2.0\n\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport * as vscode from 'vscode';\nimport * as path from 'path';\nimport * as semver from 'semver';\n\nimport {\n  VSCODE_YAML_EXTENSION_ID,\n  VSCODE_YAML_DISPLAY_NAME,\n  VSCODE_YAML_NOT_INSTALLED_MESSAGE,\n  VSCODE_YAML_LOW_VERSION_MESSAGE,\n  VSCODE_YAML_NO_REGISTRATION_MESSAGE,\n  VSCODE_YAML_INSTALL_SUCCESS,\n  MICROPROFILE_SCHEMA,\n  MICROPROFILE_SCHEMA_PREFIX\n} from \"./YamlConstants\";\n\nimport { Uri } from 'vscode';\nimport { LanguageClient } from 'vscode-languageclient';\nimport { MicroProfileLS } from '../definitions/constants';\n\n// The function signature exposed by vscode-yaml:\n// 1. the requestSchema api will be called by vscode-yaml extension to decide whether the schema can be handled by this\n// contributor, if it returns undefined, means it doesn't support this yaml file, vscode-yaml will ask other contributors\n// 2. the requestSchemaContent api  will give the parameter uri returned by the first api, and ask for the json content(after stringify) of\n// the schema\ndeclare type YamlSchemaContributor = (schema: string,\n  requestSchema: (resource: string) => string | undefined,\n  requestSchemaContent: (uri: string) => Promise<string>) => void;\n\ninterface JsonSchemaForProjectInfo {\n  projectURI: string;\n  jsonSchema: string;\n}\n\nexport interface MicroProfilePropertiesChangeEvent {\n  projectURIs: Array<string>;\n  type: Array<MicroProfilePropertiesScopeEnum>;\n}\nexport enum MicroProfilePropertiesScopeEnum {\n  sources = 1,\n  dependencies = 2\n}\n\n// Yaml Schema cache which caches YAML Schema (in JSON format) for application.yaml files\n// which belong to a MicroProfile project.\nexport class YamlSchemaCache {\n  private readonly cache = new Map<string /* application yaml URI */, JsonSchemaForProjectInfo>();\n  private _languageClient: LanguageClient;\n  public set languageClient(languageClient: LanguageClient) {\n    this._languageClient = languageClient;\n  }\n\n  /**\n   * Returns the JSON Schema to use for the  given application yaml file URI.\n   *\n   * @param applicationYamlUri the application yaml file URI\n   */\n  public async getSchema(applicationYamlUri: string): Promise<string | undefined> {\n    const yamlSchema = this.cache.get(applicationYamlUri);\n    if (yamlSchema) {\n      return yamlSchema.jsonSchema;\n    }\n    if (!this._languageClient) {\n      return undefined;\n    }\n    const params = {\n      uri: applicationYamlUri,\n      scopes: [1, 2]\n    };\n    return this._languageClient.sendRequest(MicroProfileLS.JSON_SCHEMA_FOR_PROJECT_INFO_REQUEST, params)\n      .then((result: JsonSchemaForProjectInfo) => {\n        const jsonSchema = result.jsonSchema;\n        this.cache.set(applicationYamlUri, result);\n        return jsonSchema;\n      }, (err) => {\n        console.error(`Error while consumming '${MicroProfileLS.JSON_SCHEMA_FOR_PROJECT_INFO_REQUEST}' request: ${err.message}`);\n      });\n  }\n\n  /**\n   * Evict the cache according to the classpath changed of the given project URIs\n   *\n   * @param event the properties change event\n   */\n  public evict(event: MicroProfilePropertiesChangeEvent) {\n    // collect all application.yaml uris which belong to the event project URIs\n    // and evict them from the cache.\n    this.cache.forEach((jsonSchema: JsonSchemaForProjectInfo, uri: string) => {\n      if (event.projectURIs.includes(jsonSchema.projectURI)) {\n        this.cache.delete(uri);\n      }\n    });\n  }\n}\n\nlet yamlSchemaCache: YamlSchemaCache;\nlet listener: vscode.Disposable|undefined = undefined;\n\nexport async function registerYamlSchemaSupport(): Promise<YamlSchemaCache | undefined> {\n  const yamlPlugin: any = await activateYamlExtension();\n  if (!yamlPlugin || !yamlPlugin.registerContributor) {\n    // activateYamlExtension has already alerted users about errors.\n    return undefined;\n  }\n  yamlSchemaCache = new YamlSchemaCache();\n  // register for microprofile schema provider\n  yamlPlugin.registerContributor(MICROPROFILE_SCHEMA, requestYamlSchemaUriCallback, requestYamlSchemaContentCallback);\n  return yamlSchemaCache;\n}\n\n// find redhat.vscode-yaml extension and try to activate it to get the yaml contributor\n// this function should only be called once when vscode-microprofile activates\nasync function activateYamlExtension(): Promise<{ registerContributor: YamlSchemaContributor } | undefined> {\n  const ext = vscode.extensions.getExtension(VSCODE_YAML_EXTENSION_ID);\n  const isApplicationYamlOpened: boolean = isEditorApplicationYaml(vscode.window.activeTextEditor);\n\n  if (!ext) {\n    if (isApplicationYamlOpened) {\n      await askInstallVSCodeYaml(VSCODE_YAML_NOT_INSTALLED_MESSAGE);\n    } else {\n      listener = createInstallListener(VSCODE_YAML_NOT_INSTALLED_MESSAGE);\n    }\n    return undefined;\n  }\n\n  if (ext.packageJSON.version && !semver.gte(ext.packageJSON.version, '0.0.15')) {\n    if (isApplicationYamlOpened) {\n      await askInstallVSCodeYaml(VSCODE_YAML_LOW_VERSION_MESSAGE);\n    } else {\n      listener = createInstallListener(VSCODE_YAML_LOW_VERSION_MESSAGE);\n    }\n    return undefined;\n  }\n  const yamlPlugin = await ext.activate();\n\n  if (!yamlPlugin || !yamlPlugin.registerContributor) {\n    if (isApplicationYamlOpened) {\n      await askInstallVSCodeYaml(VSCODE_YAML_NO_REGISTRATION_MESSAGE);\n    } else {\n      listener = createInstallListener(VSCODE_YAML_NO_REGISTRATION_MESSAGE);\n    }\n    return undefined;\n  }\n\n  return yamlPlugin;\n}\n\n// see docs from YamlSchemaContributor\nfunction requestYamlSchemaUriCallback(resource: string): string | undefined {\n  const textEditor = vscode.window.visibleTextEditors.find((editor) => editor.document.uri.toString() === resource);\n  if (textEditor) {\n    if (resource.endsWith('application.yaml') || resource.endsWith('application.yml')) {\n      return MICROPROFILE_SCHEMA_PREFIX + resource;\n    }\n  }\n  return undefined;\n}\n\n// see docs from YamlSchemaContributor\nfunction requestYamlSchemaContentCallback(uri: string): Promise<string | undefined> {\n  const parsedUri = Uri.parse(uri);\n  if (parsedUri.scheme !== MICROPROFILE_SCHEMA) {\n    return undefined;\n  }\n  if (!parsedUri.path || !parsedUri.path.startsWith('/')) {\n    return undefined;\n  }\n  const applicationYamlUri = uri.substring(MICROPROFILE_SCHEMA_PREFIX.length);\n  return yamlSchemaCache.getSchema(applicationYamlUri);\n}\n\nfunction isEditorApplicationYaml(editor: vscode.TextEditor|undefined): boolean {\n  if (!editor) {\n    return false;\n  }\n  const currentFileName: string = editor.document.fileName;\n  if (!currentFileName) return false;\n  return currentFileName.endsWith(path.sep + 'application.yaml') || currentFileName.endsWith(path.sep + 'application.yml');\n}\n\nfunction createInstallListener(message: string): vscode.Disposable {\n  return vscode.window.onDidChangeActiveTextEditor(async (change: vscode.TextEditor | undefined) => {\n    if (!change) return;\n\n    if (isEditorApplicationYaml(change)) {\n      await askInstallVSCodeYaml(message);\n    }\n  });\n}\n\nasync function askInstallVSCodeYaml(message: string): Promise<void> {\n  const INSTALL: string = 'Install';\n  const RELOAD: string = 'Reload';\n\n  const response: string|undefined = await vscode.window.showWarningMessage(message, INSTALL);\n  if (response === INSTALL) {\n    await installVSCodeYaml();\n    if (listener) listener.dispose();\n    const response: string|undefined = await vscode.window.showInformationMessage(VSCODE_YAML_INSTALL_SUCCESS, RELOAD);\n    if (response === RELOAD) {\n      await vscode.commands.executeCommand<void>('workbench.action.reloadWindow');\n    }\n  }\n}\n\nasync function installVSCodeYaml(): Promise<void> {\n  await vscode.window.withProgress<void>({ location: vscode.ProgressLocation.Notification, title: `Installing '${VSCODE_YAML_DISPLAY_NAME}'...`}, () => {\n    return vscode.commands.executeCommand<void>('workbench.extensions.installExtension', VSCODE_YAML_EXTENSION_ID);\n  });\n}\n","/**\r\n * Copyright 2020 Red Hat, Inc. and others.\r\n\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n\r\n *     http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nimport * as vscode from 'vscode';\r\n\r\nexport const MICROPROFILE_SCHEMA = 'microprofile';\r\nexport const MICROPROFILE_SCHEMA_PREFIX = MICROPROFILE_SCHEMA + '://schema/';\r\nexport const VSCODE_YAML_EXTENSION_ID = 'redhat.vscode-yaml';\r\nexport const VSCODE_YAML_DISPLAY_NAME = 'YAML Support by Red Hat';\r\nexport const VSCODE_YAML_NOT_INSTALLED_MESSAGE = `For application.yaml support, please install '${VSCODE_YAML_DISPLAY_NAME}' and reload ${vscode.env.appName}.`;\r\nexport const VSCODE_YAML_LOW_VERSION_MESSAGE = `The installed version of '${VSCODE_YAML_DISPLAY_NAME}' doesn't support multiple schemas. Please install the latest version and reload ${vscode.env.appName}.`;\r\nexport const VSCODE_YAML_NO_REGISTRATION_MESSAGE = `The installed version of '${VSCODE_YAML_DISPLAY_NAME}' doesn't support MicroProfile Intellisense. Please install the latest version and reload ${vscode.env.appName}.`;\r\nexport const VSCODE_YAML_INSTALL_SUCCESS = `Successfully installed '${VSCODE_YAML_DISPLAY_NAME}'. Please reload ${vscode.env.appName}.`;","import * as vscode from 'vscode';\nimport * as path from 'path';\nimport { Commands } from '../definitions/constants';\nimport { DocumentFilter, DocumentSelector } from 'vscode-languageclient';\n\nlet existingExtensions: MicroProfileContribution[];\n\n/**\n * MicroProfile language server contribution\n */\nexport interface MicroProfileContribution {\n  jarExtensions: string[];\n  documentSelector: DocumentSelector;\n}\n\n/**\n * Returns all MicroProfile language server contributions from package.json\n *\n * @param extensions array of extensions to search contributions from\n */\nexport function collectMicroProfileJavaExtensions(extensions: readonly vscode.Extension<any>[]): MicroProfileContribution[] {\n  const result: MicroProfileContribution[] = [];\n  if (extensions && extensions.length) {\n    for (const extension of extensions) {\n      const contributesSection = extension.packageJSON.contributes;\n      if (contributesSection && contributesSection.microprofile) {\n        const microprofileSection = contributesSection.microprofile;\n        const contributes: MicroProfileContribution = {jarExtensions: [], documentSelector: []};\n\n        setJarExtensionsIfExists(contributes, microprofileSection, extension.extensionPath);\n        setDocumentSelectorIfExists(contributes, microprofileSection);\n\n        if (contributes.jarExtensions || contributes.documentSelector) {\n          result.push(contributes);\n        }\n      }\n    }\n  }\n  // Make a copy of extensions:\n  existingExtensions = result.slice();\n  return result;\n}\n\nexport function handleExtensionChange(extensions: readonly vscode.Extension<any>[]) {\n  if (!existingExtensions) {\n    return;\n  }\n  const oldExtensions = new Set(existingExtensions.slice());\n  const newExtensions = collectMicroProfileJavaExtensions(extensions);\n  let hasChanged = (oldExtensions.size !== newExtensions.length);\n  if (!hasChanged) {\n    for (const newExtension of newExtensions) {\n      if (!oldExtensions.has(newExtension)) {\n        hasChanged = true;\n        break;\n      }\n    }\n  }\n\n  if (hasChanged) {\n    const msg = `Extensions to the MicroProfile Language Server changed, reloading ${vscode.env.appName} is required for the changes to take effect.`;\n    const action = 'Reload';\n    vscode.window.showWarningMessage(msg, action).then((selection) => {\n      if (action === selection) {\n        vscode.commands.executeCommand(Commands.RELOAD_WINDOW);\n      }\n    });\n  }\n}\n\nfunction setJarExtensionsIfExists(obj: MicroProfileContribution, section: any, extensionPath: string): void {\n  if (Array.isArray(section.jarExtensions)) {\n    for (const microprofileJavaExtensionPath of section.jarExtensions) {\n      obj.jarExtensions.push(path.resolve(extensionPath, microprofileJavaExtensionPath));\n    }\n  }\n}\n\nfunction setDocumentSelectorIfExists(obj: MicroProfileContribution, section: any): void {\n  if (!Array.isArray(section.documentSelector)) {\n    return;\n  }\n  const documentSelector: DocumentSelector = [];\n  section.documentSelector.forEach((selector: any) => {\n    if (typeof selector === 'string') {\n      documentSelector.push(selector);\n    } else if (selector) {\n      const documentFilter: {[key: string]: string} = {};\n      if (typeof selector.language === 'string') {\n        documentFilter.language = selector.language;\n      }\n      if (typeof selector.scheme === 'string') {\n        documentFilter.scheme = selector.scheme;\n      }\n      if (typeof selector.pattern === 'string') {\n        documentFilter.pattern = selector.pattern;\n      }\n      if (documentFilter.language || documentFilter.scheme || documentFilter.pattern) {\n        documentSelector.push(documentFilter as DocumentFilter);\n      }\n    }\n  });\n  obj.documentSelector = obj.documentSelector.concat(documentSelector);\n}","import { extensions, window, commands } from \"vscode\";\n\nconst JAVA_EXTENSION_ID = \"redhat.java\";\n\nexport enum ServerMode {\n  STANDARD = \"Standard\",\n  LIGHTWEIGHT = \"LightWeight\",\n  HYBRID = \"Hybrid\",\n}\n\n/**\n * Waits for the java language server to launch in standard mode\n * Before activating Tools for MicroProfile.\n * If java ls was started in lightweight mode, It will prompt user to switch\n */\nexport async function waitForStandardMode() {\n  const vscodeJava = extensions.getExtension(JAVA_EXTENSION_ID);\n  if (!vscodeJava) {\n    throw new Error(\"VSCode java is not installed\");\n  }\n\n  const api = await vscodeJava.activate();\n  if (!api) {\n    throw new Error(\"VSCode java api not found\");\n  }\n\n  // If hybrid, standard mode is being launched. Wait for standard mode then resolve.\n  if (api.serverMode === ServerMode.HYBRID) {\n    return new Promise((resolve) => {\n      api.onDidServerModeChange((mode: string) => {\n        if (mode === ServerMode.STANDARD) {\n          resolve();\n        }\n      });\n    });\n    // If Lightweight. Prompt to switch then wait for Standard mode.\n    // Even if they do not select Yes on the prompt. This still waits for standard mode\n    // since standard mode switch can be triggered other ways.\n  } else if (api.serverMode === ServerMode.LIGHTWEIGHT) {\n    window.showInformationMessage(\n        \"Tools for MicroProfile requires the Java language server to run in Standard mode. \" +\n        \"Do you want to switch it to Standard mode now?\",\n        \"Yes\",\n        \"Later\"\n      )\n      .then((answer) => {\n        if (answer === \"Yes\") {\n          commands.executeCommand(\"java.server.mode.switch\", ServerMode.STANDARD, true);\n        }\n      });\n    return new Promise((resolve) => {\n      api.onDidServerModeChange((mode: string) => {\n        if (mode === ServerMode.STANDARD) {\n          resolve();\n        }\n      });\n    });\n  }\n}\n"],"sourceRoot":""}